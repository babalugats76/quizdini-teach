(function(e){function t(t){for(var r,c,u=t[0],l=t[1],s=t[2],b=0,d=[];b<u.length;b++)c=u[b],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);i&&i(t);while(d.length)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var l=n[u];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={app:0},a=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var i=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"532d":function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("a79d");var r=n("7a23");function o(e,t,n,o,a,c){const u=Object(r["y"])("router-view");return Object(r["q"])(),Object(r["d"])(Object(r["z"])(a.layout),null,{default:Object(r["I"])(()=>[Object(r["g"])(u,{layout:a.layout,"onUpdate:layout":t[1]||(t[1]=e=>a.layout=e)},null,8,["layout"])]),_:1})}var a={name:"App",data(){return{layout:"div"}}};n("bc43");a.render=o;var c=a,u=n("6c02");function l(e,t,n,o,a,c){const u=Object(r["y"])("auth"),l=Object(r["y"])("country"),s=Object(r["y"])("layout");return Object(r["q"])(),Object(r["d"])(s,{name:"LayoutDefault"},{default:Object(r["I"])(()=>[Object(r["g"])("div",null,[Object(r["g"])(u),Object(r["g"])(l)])]),_:1})}function s(e,t,n,o,a,c){return Object(r["x"])(e.$slots,"default")}var i={name:"Layout",inheritAttrs:!1,props:{name:{type:String,default:"div",required:!0}},emits:["update:layout"],created(){this.$emit("update:layout",this.name)}};i.render=s;var b=i;const d={id:"auth"},O=Object(r["g"])("br",null,null,-1),j=Object(r["g"])("br",null,null,-1),p=Object(r["g"])("br",null,null,-1),g=Object(r["g"])("br",null,null,-1),m=Object(r["g"])("br",null,null,-1),h=Object(r["g"])("br",null,null,-1),f=Object(r["g"])("br",null,null,-1);function y(e,t,n,o,a,c){return Object(r["q"])(),Object(r["d"])("div",d,[Object(r["g"])("button",{onClick:t[1]||(t[1]=e=>o.fetchAuth())},"Fetch Auth"),O,Object(r["f"])(" Count: "+Object(r["B"])(o.count)+" ",1),j,Object(r["f"])(" Has Data: "+Object(r["B"])(o.hasData)+" ",1),p,Object(r["f"])(" Initialized: "+Object(r["B"])(o.initialized)+" ",1),g,Object(r["f"])(" Loading: "+Object(r["B"])(o.loading),1),m,Object(r["f"])(" Reloading: "+Object(r["B"])(o.reloading)+" ",1),h,Object(r["f"])(" In Error: "+Object(r["B"])(o.inError)+" ",1),f,Object(r["J"])(Object(r["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(r["B"])(JSON.stringify(o.auth,null,4)),513),[[r["G"],o.auth]]),Object(r["J"])(Object(r["g"])("pre",null,"There was an error!",512),[[r["G"],o.inError]]),Object(r["J"])(Object(r["g"])("pre",null,"There were "+Object(r["B"])(o.count)+" records found!",513),[[r["G"],o.hasData]]),Object(r["J"])(Object(r["g"])("pre",null,"reloading...",512),[[r["G"],o.reloading]])])}var v=n("5502"),w={name:"Auth",setup(){const e=Object(v["c"])();return{fetchAuth:()=>e.dispatch("auth/fetch"),count:Object(r["b"])(()=>e.getters["auth/count"]),auth:Object(r["b"])(()=>e.getters["auth/all"]),hasData:Object(r["b"])(()=>e.getters["auth/hasData"]),loading:Object(r["b"])(()=>e.getters["auth/loading"]),inError:Object(r["b"])(()=>e.getters["auth/inError"]),initialized:Object(r["b"])(()=>e.getters["auth/initialized"]),reloading:Object(r["b"])(()=>e.getters["auth/reloading"])}}};w.render=y;var C=w;const E={id:"country"},S=Object(r["g"])("br",null,null,-1),q=Object(r["g"])("br",null,null,-1),_=Object(r["g"])("br",null,null,-1),A=Object(r["g"])("br",null,null,-1),I=Object(r["g"])("br",null,null,-1),U=Object(r["g"])("br",null,null,-1),x=Object(r["g"])("br",null,null,-1),B=Object(r["g"])("br",null,null,-1),D=Object(r["g"])("br",null,null,-1),F=Object(r["g"])("br",null,null,-1),L=Object(r["g"])("br",null,null,-1);function k(e,t,n,o,a,c){return Object(r["q"])(),Object(r["d"])("div",E,[Object(r["f"])(" Visibility: "+Object(r["B"])(o.visibility)+" ",1),S,Object(r["g"])("button",{onClick:t[1]||(t[1]=e=>o.fetchCountries())},"Fetch Countries"),q,Object(r["g"])("button",{onClick:t[2]||(t[2]=Object(r["K"])(e=>o.visibility="merica",["prevent"]))},"America First!"),_,Object(r["f"])(" Total Count: "+Object(r["B"])(o.count)+" ",1),A,Object(r["f"])(" Filtered Count: "+Object(r["B"])(o.filteredCountries?o.filteredCountries.length:null)+" ",1),I,Object(r["f"])(" Has Data: "+Object(r["B"])(o.hasData)+" ",1),U,Object(r["f"])(" Initialized: "+Object(r["B"])(o.initialized)+" ",1),x,Object(r["f"])(" Loading: "+Object(r["B"])(o.loading),1),B,Object(r["f"])(" Reloading: "+Object(r["B"])(o.reloading)+" ",1),D,Object(r["f"])(" In Error: "+Object(r["B"])(o.inError)+" ",1),F,Object(r["J"])(Object(r["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(r["B"])(JSON.stringify(o.filteredCountries,null,4)),513),[[r["G"],o.filteredCountries]]),Object(r["J"])(Object(r["g"])("pre",null,"There was an error!",512),[[r["G"],o.inError]]),Object(r["J"])(Object(r["g"])("pre",null,"There were "+Object(r["B"])(o.count)+" records found!",513),[[r["G"],o.hasData]]),Object(r["J"])(Object(r["g"])("pre",null,"reloading...",512),[[r["G"],o.reloading]]),Object(r["J"])(Object(r["g"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.countryCode=e),type:"text"},null,512),[[r["F"],o.countryCode]]),Object(r["g"])("button",{onClick:t[4]||(t[4]=e=>o.visibility="lookup")},"Search Countries"),L,Object(r["J"])(Object(r["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(r["B"])(JSON.stringify(o.lookupCountry,null,4)),513),[[r["G"],"lookup"===o.visibility]])])}const T={all:e=>e,merica:e=>e.filter(e=>"US"===e.countryCode),lookup:(e,t)=>e.filter(e=>e.countryCode===t)};var z={name:"Country",setup(){const e=Object(r["v"])("all"),t=Object(r["v"])(""),n=Object(v["c"])(),o=Object(r["b"])(()=>n.state.countries.data),a=Object(r["b"])(()=>T[e.value](o.value)),c=Object(r["b"])(()=>T[e.value](o.value,t.value));return{fetchCountries:()=>n.dispatch("countries/fetch"),count:Object(r["b"])(()=>n.getters["countries/count"]),filteredCountries:a,lookupCountry:c,hasData:Object(r["b"])(()=>n.getters["countries/hasData"]),inError:Object(r["b"])(()=>n.getters["countries/inError"]),initialized:Object(r["b"])(()=>n.getters["countries/initialized"]),loading:Object(r["b"])(()=>n.getters["countries/loading"]),reloading:Object(r["b"])(()=>n.getters["countries/reloading"]),visibility:e,countryCode:t}}};z.render=k;var N=z,J={name:"ApiTester",components:{Auth:C,Country:N,Layout:b}};J.render=l;var G=J;function H(e,t,n,o,a,c){const u=Object(r["y"])("layout");return Object(r["q"])(),Object(r["d"])(u,null,{default:Object(r["I"])(()=>[Object(r["x"])(e.$slots,"default")]),_:3})}var P={name:"AuthSuccess",components:{Layout:b},created(){window.document.body.style.display="none",window.opener&&(window.opener.open("/dashboard","_self"),window.opener.focus(),window.close())}};P.render=H;var $=P;const R=Object(r["g"])("h1",null,"Welcome to the Dashboard",-1);function M(e,t,n,o,a,c){return Object(r["q"])(),Object(r["d"])("div",null,[R])}var V={name:"Dashboard"};V.render=M;var K=V;function W(e,t,n,o,a,c){const u=Object(r["y"])("LoginForm"),l=Object(r["y"])("layout");return Object(r["q"])(),Object(r["d"])(l,{name:"LayoutDefault"},{default:Object(r["I"])(()=>[Object(r["g"])(u)]),_:1})}n("ddb0");const X=Object(r["L"])("data-v-37a0b419");Object(r["t"])("data-v-37a0b419");const Y={class:"login"},Z={class:"login__google-signin google-signin"},Q=Object(r["g"])("span",{class:"google-signin__icon"},null,-1),ee=Object(r["g"])("span",{class:"google-signin__text"},"Login with Google",-1),te={key:0},ne={class:"form-input"},re={class:"form-input"};Object(r["r"])();const oe=X((e,t,n,o,a,c)=>{const u=Object(r["y"])("ui-input");return Object(r["q"])(),Object(r["d"])("div",Y,[Object(r["g"])("div",Z,[Object(r["g"])("div",{class:"google-signin__btn",onClick:t[1]||(t[1]=e=>o.popup("/auth/google","google_login",500,500))},[Q,ee])]),Object(r["g"])("form",{class:"login-form",onSubmit:t[6]||(t[6]=Object(r["K"])((...e)=>o.loginUser&&o.loginUser(...e),["prevent"]))},[e.errors&&!e.isDirty&&e.message?(Object(r["q"])(),Object(r["d"])("div",te,Object(r["B"])(e.message),1)):Object(r["e"])("",!0),Object(r["g"])("div",ne,[Object(r["g"])(u,{value:e.username,"onUpdate:value":t[2]||(t[2]=t=>e.username=t),errors:e.errors["username"],label:"Username",name:"username",type:"text",tabindex:"1",onInput:t[3]||(t[3]=e=>o.validate("username"))},null,8,["value","errors"])]),Object(r["g"])("div",re,[Object(r["g"])(u,{value:e.password,"onUpdate:value":t[4]||(t[4]=t=>e.password=t),errors:e.errors["password"],label:"Password",name:"password",type:"password",tabindex:"2",onInput:t[5]||(t[5]=e=>o.validate("password"))},null,8,["value","errors"])]),Object(r["g"])("input",{type:"submit",value:"Login",disabled:!e.isDirty||e.hasErrors||e.loading,tabindex:"3"},null,8,["disabled"])],32)])});var ae=n("506a"),ce=n("bc3a"),ue=n.n(ce);ue.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const le={timeout:3e4},se=async({url:e,config:t=le})=>{try{const n=await ue.a.get(e,t);return{data:n.data,error:!1}}catch(n){return{data:n.response.data,error:!0}}},ie=async({url:e,data:t,config:n=le})=>{try{const r=await ue.a.post(e,t,n);return{data:r.data,error:!1}}catch(r){return{data:r.response.data,error:!0}}},be="/api/current_user",de="/auth/local",Oe=()=>se({url:""+be}),je=e=>ie({url:""+de,data:e});function pe(e,t,n,o,a,c){const u=Object(r["y"])("ui-error");return Object(r["q"])(),Object(r["d"])("label",null,[Object(r["f"])(Object(r["B"])(n.label)+" ",1),Object(r["J"])(Object(r["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.input=e),autocomplete:"autocomplete ? 'on' : null",class:c.classes,name:n.name,type:n.type},null,10,["name","type"]),[[r["E"],o.input]]),n.errors?(Object(r["q"])(),Object(r["d"])(u,{key:0,errors:n.errors},null,8,["errors"])):Object(r["e"])("",!0)])}const ge={key:0};function me(e,t,n,o,a,c){return Object(r["q"])(),Object(r["d"])("div",null,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(n.errors,(e,t)=>(Object(r["q"])(),Object(r["d"])("ul",{key:t},[e?(Object(r["q"])(),Object(r["d"])("li",ge,Object(r["B"])(e),1)):Object(r["e"])("",!0)]))),128))])}var he={name:"UiError",props:{errors:{type:Array,default:()=>[],required:!1}}};he.render=me;var fe=he,ye={name:"UiInput",components:{UiError:fe},props:{autocomplete:{type:Boolean},errors:{type:[Array,String],default:"",required:!1},label:{type:String,default:"",required:!1},name:{type:String,required:!0},type:{type:String,default:"text",required:!0},value:{type:String}},emits:["update:value"],setup(e,{emit:t}){const n=Object(r["b"])({get:()=>e.value,set:e=>t("update:value",e)});return{input:n}},computed:{classes(){return{"ui-input":!0}}}};ye.render=pe;var ve=ye;const we=e=>({FETCH:e+"_FETCH",SUCCESS:e+"_SUCCESS",FAILURE:e+"_FAILURE",PENDING:e+"_PENDING"}),Ce=we("AUTH");var Ee={name:"LoginForm",components:{UiInput:ve},setup(){const e=Object(v["c"])(),t=Object(u["c"])(),n=Object(r["u"])({username:"",password:"",loading:!1,isDirty:Object(r["b"])(()=>!(!n.username||!n.password)),errors:{},hasErrors:Object(r["b"])(()=>Object.keys(n.errors).some(e=>!!n.errors[e])),message:""}),o=Object(ae["a"])({username:Object(ae["b"])().required(),password:Object(ae["b"])().required()});function a(e){o.validateAt(e,{username:n.username,password:n.password}).then(()=>{n.errors[e]=""}).catch(t=>{n.errors[e]=t.errors})}function c(){o.validate({username:n.username,password:n.password},{abortEarly:!1}).then(()=>(n.loading=!0,je({username:n.username,password:n.password}).then(e=>{const{error:t,data:r}=e||{};if(t)throw n.errors={},n.loading=!1,n.password="",n.username="",n.message=r.message,new Error("LoginFailed")}).then(()=>e.dispatch("auth/"+Ce.FETCH)).then(()=>t.push({name:"dashboard"})).catch(()=>{}))).catch(e=>{e.inner.forEach(e=>{n.errors[e.path]=e.errors})})}const l=(e,t,n,r,o=window)=>{const a=o.top.outerHeight/2+o.top.screenY-r/2,c=o.top.outerWidth/2+o.top.screenX-n/2,u=`rel=opener, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${n}, height=${r}, top=${a}, left=${c}`;o.open(e,t,u)};return{loginUser:c,popup:l,validate:a,...Object(r["C"])(n)}}};n("8b22");Ee.render=oe,Ee.__scopeId="data-v-37a0b419";var Se=Ee,qe={name:"Login",components:{Layout:b,LoginForm:Se}};qe.render=W;var _e=qe;const Ae=Object(r["g"])("h1",null,"Not Found",-1);function Ie(e,t,n,o,a,c){return Object(r["q"])(),Object(r["d"])("div",null,[Ae])}var Ue={name:"NotFound"};Ue.render=Ie;var xe=Ue;const Be=[{path:"/",name:"home",component:G,meta:{},props:!1},{path:"/login",name:"login",component:_e,meta:{guest:!0}},{path:"/dashboard",name:"dashboard",component:K,meta:{requiresAuth:!0},props:!0},{path:"/success",name:"success",component:$,meta:{},props:!0},{path:"/:catchAll(.*)",name:"notfound",component:xe,meta:{}}];var De=Be;const Fe=()=>({counter:0}),Le={counter:e=>e.counter},ke={setCounter({commit:e},t){e("setCounter",t)},resetCounter({commit:e}){e("setCounter",{counter:0})},updateCounter({commit:e}){e("incrementCounter")}},Te={setCounter(e,t){e.counter=t.counter},incrementCounter(e){e.counter++}};var ze={namespaced:!0,state:Fe,getters:Le,actions:ke,mutations:Te};const Ne=async(e,{cb:t,types:n})=>{try{e.commit(n.PENDING);const{data:r,error:o}=await t();e.commit(o?n.FAILURE:n.SUCCESS,r)}catch(r){e.commit(n.FAILURE,r)}},Je={accountType:null,credits:null,googlePicture:null,authenticated:!1,username:null},Ge={data:Je,error:null,failed:!1,loaded:!1,loading:!1},He=()=>Ge,Pe={auth:e=>e.data,error:e=>e.error,failed:e=>e.failed,loaded:e=>e.loaded,loading:e=>e.loading,authenticated:e=>e.data.authenticated},$e={[Ce.FETCH]:e=>Ne(e,{cb:()=>Oe(),types:Ce})},Re={[Ce.PENDING](e){e.loading=!0},[Ce.SUCCESS](e,t){const{googleId:n,id:r=null}=t||{},o=r?{...t,accountType:n?"google":"local",authenticated:!0}:Je;e.data=o,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[Ce.FAILURE](e,t){e.data=Je,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var Me={namespaced:!0,state:He,getters:Pe,actions:$e,mutations:Re},Ve=n("532d"),Ke=n.n(Ve);const We={async init({dispatch:e}){await e("auth/AUTH_FETCH")}};var Xe=We;const Ye=!1,Ze=Object(v["b"])({plugins:[...Ye?[Object(v["a"])()]:[]],actions:Xe,modules:{test:ze,auth:Me,countries:Ke.a},strict:Ye});var Qe=Ze;const et=Qe.dispatch("init"),tt=Object(r["b"])(()=>Qe.getters["auth/authenticated"]),nt=Object(u["a"])({history:Object(u["b"])(),routes:De});nt.beforeEach((e,t,n)=>{et.then(n).catch(e=>console.log("Unable to initialize store",e))}),nt.beforeEach((e,t,n)=>{e.matched.some(e=>e.meta.guest)?tt.value?n({name:"dashboard"}):n():e.matched.some(e=>e.meta.requiresAuth)?tt.value?n():n({name:"login"}):n()});var rt=nt;const ot={class:"p-4"},at={class:"app-header"},ct={class:"container"};function ut(e,t,n,o,a,c){const u=Object(r["y"])("app-nav");return Object(r["q"])(),Object(r["d"])("div",ot,[Object(r["g"])("header",at,[Object(r["g"])(u)]),Object(r["g"])("main",ct,[Object(r["x"])(e.$slots,"default")])])}function lt(e,t,n,o,a,c){const u=Object(r["y"])("NavItems");return Object(r["q"])(),Object(r["d"])("div",null,[Object(r["g"])("strong",null,Object(r["B"])(o.authenticated),1),Object(r["g"])(u,{items:o.routes,authenticated:o.authenticated},null,8,["items","authenticated"])])}function st(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(r["l"])(e)}const it=({items:e,authenticated:t})=>e.filter(e=>{const{name:n,meta:r}=e,{requiresAuth:o=!1,guest:a=!1}=r||{};return console.log("logged in?",t),console.log("name",n),console.log("requiresAuth",o),console.log("guest",a),console.log("show",!t||(o||!a)),!t||(o||!a)}).map(e=>{const{name:t}=e;return Object(r["g"])("span",{key:"name"},st(t)?t:{default:()=>[t]})});var bt={name:"AppNav",components:{NavItems:it},setup(){const e=Object(v["c"])(),t=Object(r["b"])(()=>e.getters["auth/authenticated"]);return{authenticated:t,routes:De}}};bt.render=lt;var dt=bt,Ot={name:"LayoutDefault",components:{AppNav:dt}};Ot.render=ut;var jt=Ot;const pt=[jt];var gt={install:(e,t)=>{pt.forEach(t=>{e.component(t.name,t)})}};Object(r["c"])(c).use(Qe).use(rt).use(gt).mount("#quizdini")},6423:function(e,t,n){},"8b22":function(e,t,n){"use strict";n("6423")},bc43:function(e,t,n){"use strict";n("f50f")},f50f:function(e,t,n){}});
//# sourceMappingURL=app.bd90dee2.js.map