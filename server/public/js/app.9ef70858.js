(function(e){function t(t){for(var n,c,l=t[0],u=t[1],s=t[2],d=0,b=[];d<l.length;d++)c=l[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);i&&i(t);while(b.length)b.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,l=1;l<a.length;l++){var u=a[l];0!==r[u]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},r={app:0},o=[];function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var i=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"00ea":function(e,t,a){},"361e":function(e,t,a){"use strict";a("00ea")},"56d7":function(e,t,a){"use strict";a.r(t);a("a79d");var n=a("7a23");function r(e,t,a,r,o,c){const l=Object(n["z"])("router-view");return Object(n["r"])(),Object(n["d"])(Object(n["A"])(o.layout),null,{default:Object(n["K"])(()=>[Object(n["g"])(l,{layout:o.layout,"onUpdate:layout":t[1]||(t[1]=e=>o.layout=e)},null,8,["layout"])]),_:1})}var o={name:"App",data(){return{layout:"div"}}};a("bc43");o.render=r;var c=o,l=a("6c02");function u(e,t,a,r,o,c){const l=Object(n["z"])("country"),u=Object(n["z"])("layout");return Object(n["r"])(),Object(n["d"])(u,{name:"LayoutDefault"},{default:Object(n["K"])(()=>[Object(n["g"])("div",null,[Object(n["g"])(l)])]),_:1})}const s={id:"country"},i=Object(n["g"])("br",null,null,-1),d=Object(n["g"])("br",null,null,-1),b=Object(n["g"])("br",null,null,-1),p=Object(n["g"])("br",null,null,-1),O={key:0},j=Object(n["g"])("br",null,null,-1),m=Object(n["g"])("br",null,null,-1),g=Object(n["g"])("br",null,null,-1),y=Object(n["g"])("br",null,null,-1),f=Object(n["g"])("br",null,null,-1),v=Object(n["g"])("br",null,null,-1),h=Object(n["g"])("option",{disabled:"",value:""},"Please select one",-1);function C(e,t,a,r,o,c){return Object(n["r"])(),Object(n["d"])("div",s,[Object(n["f"])(" Visibility: "+Object(n["C"])(r.visibility)+" ",1),i,Object(n["g"])("button",{onClick:t[1]||(t[1]=e=>r.fetchCountries())},"Fetch Countries"),d,Object(n["g"])("button",{onClick:t[2]||(t[2]=Object(n["M"])(e=>r.visibility="all",["prevent"]))},"All Countries"),b,Object(n["g"])("button",{onClick:t[3]||(t[3]=Object(n["M"])(e=>r.visibility="merica",["prevent"]))},"America First!"),p,r.loaded?(Object(n["r"])(),Object(n["d"])("span",O,"Filtered Count: "+Object(n["C"])(r.filteredCountries?r.filteredCountries.length:null),1)):Object(n["e"])("",!0),j,Object(n["f"])(" loaded: "+Object(n["C"])(r.loaded),1),m,Object(n["f"])(" loading: "+Object(n["C"])(r.loading)+" ",1),g,Object(n["f"])(" failed: "+Object(n["C"])(r.failed)+" ",1),y,Object(n["L"])(Object(n["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(n["C"])(JSON.stringify(r.filteredCountries,null,4)),513),[[n["I"],r.loaded]]),Object(n["L"])(Object(n["g"])("pre",null,"There was an error!",512),[[n["I"],r.failed]]),Object(n["L"])(Object(n["g"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.countryCode=e),type:"text"},null,512),[[n["H"],r.countryCode]]),Object(n["g"])("button",{onClick:t[5]||(t[5]=e=>r.visibility="lookupByCode")},"Search By Code"),f,Object(n["L"])(Object(n["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(n["C"])(JSON.stringify(r.lookupByCode,null,4)),513),[[n["I"],"lookupByCode"===r.visibility]]),Object(n["L"])(Object(n["g"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.countryName=e),type:"text"},null,512),[[n["H"],r.countryName]]),Object(n["g"])("button",{onClick:t[7]||(t[7]=e=>r.visibility="lookupByName")},"Search By Name"),v,Object(n["L"])(Object(n["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(n["C"])(JSON.stringify(r.lookupByName,null,4)),513),[[n["I"],"lookupByName"===r.visibility]]),Object(n["L"])(Object(n["g"])("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>r.selectedCountry=e)},[h,(Object(n["r"])(!0),Object(n["d"])(n["a"],null,Object(n["x"])(r.lookupByName,e=>(Object(n["r"])(),Object(n["d"])("option",{key:e.key,value:e.key},Object(n["C"])(e.text),9,["value"]))),128))],512),[[n["G"],r.selectedCountry]])])}var w=a("5502");const _=e=>({FETCH:e+"_FETCH",SUCCESS:e+"_SUCCESS",FAILURE:e+"_FAILURE",PENDING:e+"_PENDING"}),S=_("AUTH"),k=_("COUNTRIES"),E={all:e=>e,merica:e=>e.filter(e=>"US"===e.value),lookupByCode:(e,t)=>e.filter(e=>e.value===t),lookupByName:function(e,t){const a=new RegExp(""+t,"gis");return e.filter(e=>a.test(e.text))}};var N={name:"Country",setup(){const e=Object(n["w"])("lookupByName"),t=Object(n["w"])(""),a=Object(n["w"])(""),r=Object(n["w"])(""),o=Object(w["c"])(),c=()=>o.dispatch("countries/"+k.FETCH),l=Object(n["b"])(()=>o.getters["countries/options"]),u=Object(n["b"])(()=>E[e.value](l.value)),s=Object(n["b"])(()=>E[e.value](l.value,t.value)),i=Object(n["b"])(()=>E[e.value](l.value,a.value));return Object(n["p"])(()=>{c()}),{fetchCountries:c,filteredCountries:u,lookupByCode:s,lookupByName:i,loaded:Object(n["b"])(()=>o.getters["countries/loaded"]),failed:Object(n["b"])(()=>o.getters["countries/failed"]),loading:Object(n["b"])(()=>o.getters["countries/loading"]),visibility:e,countryCode:t,countryName:a,selectedCountry:r}}};N.render=C;var I=N,U={name:"ApiTester",components:{Country:I}};U.render=u;var x=U;function L(e,t,a,r,o,c){const l=Object(n["z"])("layout");return Object(n["r"])(),Object(n["d"])(l,null,{default:Object(n["K"])(()=>[Object(n["y"])(e.$slots,"default")]),_:3})}var F={name:"AuthSuccess",created(){window.document.body.style.display="none",window.opener&&(window.opener.open("/dashboard","_self"),window.opener.focus(),window.close())}};F.render=L;var T=F;const z=Object(n["g"])("h1",null,"Welcome to the Dashboard",-1);function A(e,t,a,r,o,c){const l=Object(n["z"])("layout");return Object(n["r"])(),Object(n["d"])(l,{name:"LayoutDefault"},{default:Object(n["K"])(()=>[z]),_:1})}var P={name:"Dashboard"};P.render=A;var D=P;function B(e,t,a,r,o,c){const l=Object(n["z"])("LoginForm"),u=Object(n["z"])("layout");return Object(n["r"])(),Object(n["d"])(u,{name:"LayoutDefault"},{default:Object(n["K"])(()=>[Object(n["g"])(l)]),_:1})}a("ddb0");const H=Object(n["N"])("data-v-37a0b419");Object(n["u"])("data-v-37a0b419");const q={class:"login"},R={class:"login__google-signin google-signin"},$=Object(n["g"])("span",{class:"google-signin__icon"},null,-1),G=Object(n["g"])("span",{class:"google-signin__text"},"Login with Google",-1),M={key:0},J={class:"form-input"},K={class:"form-input"};Object(n["s"])();const V=H((e,t,a,r,o,c)=>{const l=Object(n["z"])("ui-input");return Object(n["r"])(),Object(n["d"])("div",q,[Object(n["g"])("div",R,[Object(n["g"])("div",{class:"google-signin__btn",onClick:t[1]||(t[1]=e=>r.popup("/auth/google","google_login",500,500))},[$,G])]),Object(n["g"])("form",{class:"login-form",onSubmit:t[6]||(t[6]=Object(n["M"])((...e)=>r.loginUser&&r.loginUser(...e),["prevent"]))},[e.errors&&!e.isDirty&&e.message?(Object(n["r"])(),Object(n["d"])("div",M,Object(n["C"])(e.message),1)):Object(n["e"])("",!0),Object(n["g"])("div",J,[Object(n["g"])(l,{value:e.username,"onUpdate:value":t[2]||(t[2]=t=>e.username=t),errors:e.errors["username"],label:"Username",name:"username",type:"text",tabindex:"1",onInput:t[3]||(t[3]=e=>r.validate("username"))},null,8,["value","errors"])]),Object(n["g"])("div",K,[Object(n["g"])(l,{value:e.password,"onUpdate:value":t[4]||(t[4]=t=>e.password=t),errors:e.errors["password"],label:"Password",name:"password",type:"password",tabindex:"2",onInput:t[5]||(t[5]=e=>r.validate("password"))},null,8,["value","errors"])]),Object(n["g"])("input",{type:"submit",value:"Login",disabled:!e.isDirty||e.hasErrors||e.loading,tabindex:"3"},null,8,["disabled"])],32)])});var W=a("506a"),Q=a("bc3a"),X=a.n(Q);X.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const Y={timeout:3e4},Z=async({url:e,config:t=Y})=>{try{const a=await X.a.get(e,t);return{data:a.data,error:!1}}catch(a){return{data:a.response.data,error:!0}}},ee=async({url:e,data:t,config:a=Y})=>{try{const n=await X.a.post(e,t,a);return{data:n.data,error:!1}}catch(n){return{data:n.response.data,error:!0}}},te="/api/current_user",ae="/auth/local",ne=()=>Z({url:""+te}),re=e=>ee({url:""+ae,data:e});function oe(e,t,a,r,o,c){const l=Object(n["z"])("ui-error");return Object(n["r"])(),Object(n["d"])("label",null,[Object(n["f"])(Object(n["C"])(a.label)+" ",1),Object(n["L"])(Object(n["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.input=e),autocomplete:"autocomplete ? 'on' : null",class:c.classes,name:a.name,type:a.type},null,10,["name","type"]),[[n["F"],r.input]]),a.errors?(Object(n["r"])(),Object(n["d"])(l,{key:0,errors:a.errors},null,8,["errors"])):Object(n["e"])("",!0)])}const ce={key:0};function le(e,t,a,r,o,c){return Object(n["r"])(),Object(n["d"])("div",null,[(Object(n["r"])(!0),Object(n["d"])(n["a"],null,Object(n["x"])(a.errors,(e,t)=>(Object(n["r"])(),Object(n["d"])("ul",{key:t},[e?(Object(n["r"])(),Object(n["d"])("li",ce,Object(n["C"])(e),1)):Object(n["e"])("",!0)]))),128))])}var ue={name:"UiError",props:{errors:{type:Array,default:()=>[],required:!1}}};ue.render=le;var se=ue,ie={name:"UiInput",components:{UiError:se},props:{autocomplete:{type:Boolean},errors:{type:[Array,String],default:"",required:!1},label:{type:String,default:"",required:!1},name:{type:String,required:!0},type:{type:String,default:"text",required:!0},value:{type:String}},emits:["update:value"],setup(e,{emit:t}){const a=Object(n["b"])({get:()=>e.value,set:e=>t("update:value",e)});return{input:a}},computed:{classes(){return{"ui-input":!0}}}};ie.render=oe;var de=ie,be={name:"LoginForm",components:{UiInput:de},setup(){const e=Object(w["c"])(),t=Object(l["c"])(),a=Object(n["v"])({username:"",password:"",loading:!1,isDirty:Object(n["b"])(()=>!(!a.username||!a.password)),errors:{},hasErrors:Object(n["b"])(()=>Object.keys(a.errors).some(e=>!!a.errors[e])),message:""}),r=Object(W["a"])({username:Object(W["b"])().required(),password:Object(W["b"])().required()});function o(e){r.validateAt(e,{username:a.username,password:a.password}).then(()=>{a.errors[e]=""}).catch(t=>{a.errors[e]=t.errors})}function c(){r.validate({username:a.username,password:a.password},{abortEarly:!1}).then(()=>(a.loading=!0,re({username:a.username,password:a.password}).then(e=>{const{error:t,data:n}=e||{};if(t)throw a.errors={},a.loading=!1,a.password="",a.username="",a.message=n.message,new Error("LoginFailed")}).then(()=>e.dispatch("auth/"+S.FETCH)).then(()=>t.push({name:"dashboard"})).catch(()=>{}))).catch(e=>{e.inner.forEach(e=>{a.errors[e.path]=e.errors})})}const u=(e,t,a,n,r=window)=>{const o=r.top.outerHeight/2+r.top.screenY-n/2,c=r.top.outerWidth/2+r.top.screenX-a/2,l=`rel=opener, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${a}, height=${n}, top=${o}, left=${c}`;r.open(e,t,l)};return{loginUser:c,popup:u,validate:o,...Object(n["D"])(a)}}};a("8b22");be.render=V,be.__scopeId="data-v-37a0b419";var pe=be,Oe={name:"Login",components:{LoginForm:pe}};Oe.render=B;var je=Oe;const me=Object(n["g"])("h1",null,"Not Found",-1);function ge(e,t,a,r,o,c){return Object(n["r"])(),Object(n["d"])("div",null,[me])}var ye={name:"NotFound"};ye.render=ge;var fe=ye;const ve=[{path:"/",name:"home",component:x,meta:{navItem:!0},props:!1},{path:"/login",name:"login",component:je,meta:{navItem:!0,guest:!0}},{path:"/dashboard",name:"dashboard",component:D,meta:{navItem:!0,auth:!0},props:!0},{path:"/success",name:"success",component:T,meta:{navItem:!1},props:!0},{path:"/:catchAll(.*)",name:"notfound",component:fe,meta:{navItem:!1}}];var he=ve;const Ce=()=>({counter:0}),we={counter:e=>e.counter},_e={setCounter({commit:e},t){e("setCounter",t)},resetCounter({commit:e}){e("setCounter",{counter:0})},updateCounter({commit:e}){e("incrementCounter")}},Se={setCounter(e,t){e.counter=t.counter},incrementCounter(e){e.counter++}};var ke={namespaced:!0,state:Ce,getters:we,actions:_e,mutations:Se};const Ee=async(e,{cb:t,types:a})=>{try{e.commit(a.PENDING);const{data:n,error:r}=await t();e.commit(r?a.FAILURE:a.SUCCESS,n)}catch(n){e.commit(a.FAILURE,n)}},Ne={accountType:null,credits:null,googlePicture:null,authenticated:!1,username:null},Ie={data:Ne,error:null,failed:!1,loaded:!1,loading:!1},Ue=()=>Ie,xe={accountType:e=>e.accountType,auth:e=>e.data,authenticated:e=>e.data.authenticated,credits:e=>e.data.credits,error:e=>e.error,failed:e=>e.failed,googlePicture:e=>e.googlePicture,loaded:e=>e.loaded,loading:e=>e.loading},Le={[S.FETCH]:e=>Ee(e,{cb:()=>ne(),types:S})},Fe={[S.PENDING](e){e.loading=!0},[S.SUCCESS](e,t){const{googleId:a,id:n=null}=t||{},r=n?{...t,accountType:a?"google":"local",authenticated:!0}:Ne;e.data=r,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[S.FAILURE](e,t){e.data=Ne,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var Te={namespaced:!0,state:Ue,getters:xe,actions:Le,mutations:Fe};a("13d5");const ze="/api/countries",Ae=()=>Z({url:""+ze}),Pe={data:[],error:null,failed:!1,loaded:!1,loading:!1},De=()=>Pe,Be={all:e=>e.data,options:e=>e.data.reduce((e,t)=>(e.push({key:t.countryId,value:t.countryCode,text:t.countryName}),e),[]),error:e=>e.error,failed:e=>e.failed,loaded:e=>e.loaded,loading:e=>e.loading},He={[k.FETCH]:e=>Ee(e,{cb:()=>Ae(),types:k})},qe={[k.PENDING](e){e.loading=!0},[k.SUCCESS](e,t){e.data=t,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[k.FAILURE](e,t){e.data=null,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var Re={namespaced:!0,state:De,getters:Be,actions:He,mutations:qe};const $e={async init({dispatch:e}){await e("auth/AUTH_FETCH")}};var Ge=$e;const Me=!1,Je=Object(w["b"])({plugins:[...Me?[Object(w["a"])()]:[]],actions:Ge,modules:{test:ke,auth:Te,countries:Re},strict:Me});var Ke=Je;const Ve=Ke.dispatch("init"),We=Object(n["b"])(()=>Ke.getters["auth/authenticated"]),Qe=Object(l["a"])({history:Object(l["b"])(),routes:he});Qe.beforeEach((e,t,a)=>{Ve.then(a).catch(e=>console.log("Unable to initialize store",e))}),Qe.beforeEach((e,t,a)=>{e.matched.some(e=>e.meta.guest)?We.value?a({name:"dashboard"}):a():e.matched.some(e=>e.meta.auth)?We.value?a():a({name:"login"}):a()});var Xe=Qe;function Ye(e,t,a,r,o,c){return Object(n["y"])(e.$slots,"default")}var Ze={name:"Layout",inheritAttrs:!1,props:{name:{type:String,default:"div",required:!0}},emits:["update:layout"],created(){this.$emit("update:layout",this.name)}};Ze.render=Ye;var et=Ze;const tt=Object(n["N"])("data-v-092b3d2c");Object(n["u"])("data-v-092b3d2c");const at={class:"app"},nt={class:"app__header"},rt={class:"app__main"},ot=Object(n["g"])("footer",{class:"app__footer"},"Â© Quizdini 2013-21",-1);Object(n["s"])();const ct=tt((e,t,a,r,o,c)=>{const l=Object(n["z"])("app-nav");return Object(n["r"])(),Object(n["d"])("div",at,[Object(n["g"])("header",nt,[Object(n["g"])(l,{class:"app__nav"})]),Object(n["g"])("main",rt,[Object(n["y"])(e.$slots,"default")]),ot])}),lt={class:"nav"},ut={key:0,class:"nav__item"},st={key:1,href:"/logout",class:"nav__item",target:"_self"},it={key:2,class:"nav__item badge"},dt={key:3,class:"nav__item nav__item--lc"};function bt(e,t,a,r,o,c){const l=Object(n["z"])("NavItems");return Object(n["r"])(),Object(n["d"])("nav",lt,[Object(n["g"])(l,{items:r.routes,authenticated:r.auth.authenticated},null,8,["items","authenticated"]),r.auth.authenticated&&r.auth.credits>=0?(Object(n["r"])(),Object(n["d"])("span",ut,"Credits: "+Object(n["C"])(r.auth.credits),1)):Object(n["e"])("",!0),r.auth.authenticated?(Object(n["r"])(),Object(n["d"])("a",st,"logout")):Object(n["e"])("",!0),r.auth.authenticated&&"google"===r.auth.accountType?(Object(n["r"])(),Object(n["d"])("span",it,["google"===r.auth.accountType?(Object(n["r"])(),Object(n["d"])("img",{key:0,src:r.auth.googlePicture,class:"badge--google"},null,8,["src"])):Object(n["e"])("",!0)])):Object(n["e"])("",!0),r.auth.authenticated&&"local"===r.auth.accountType?(Object(n["r"])(),Object(n["d"])("span",dt,Object(n["C"])(r.auth.username),1)):Object(n["e"])("",!0)])}function pt(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(n["l"])(e)}const Ot=({items:e,authenticated:t})=>e.filter(e=>{const{meta:{navItem:a=!1,auth:n=!1,guest:r=!1}={}}=e;return!!a&&(t?n||!r:!n)}).map(e=>{const{name:t}=e;return Object(n["g"])(Object(n["z"])("router-link"),{class:"nav__item",to:{name:t},key:t},pt(t)?t:{default:()=>[t]})});var jt={name:"AppNav",components:{NavItems:Ot},setup(){const e=Object(w["c"])(),t=Object(n["b"])(()=>e.getters["auth/auth"]);return{auth:t,routes:he}}};a("cab4");jt.render=bt;var mt=jt,gt={name:"LayoutDefault",components:{AppNav:mt}};a("361e");gt.render=ct,gt.__scopeId="data-v-092b3d2c";var yt=gt;const ft=[et,yt];var vt={install:(e,t)=>{ft.forEach(t=>{e.component(t.name,t)})}};Object(n["c"])(c).use(Ke).use(Xe).use(vt).mount("#quizdini")},6423:function(e,t,a){},"8b22":function(e,t,a){"use strict";a("6423")},bc43:function(e,t,a){"use strict";a("f50f")},cab4:function(e,t,a){"use strict";a("e602")},e602:function(e,t,a){},f50f:function(e,t,a){}});
//# sourceMappingURL=app.9ef70858.js.map