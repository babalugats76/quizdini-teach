(function(e){function t(t){for(var n,c,l=t[0],u=t[1],i=t[2],b=0,d=[];b<l.length;b++)c=l[b],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);s&&s(t);while(d.length)d.shift()();return a.push.apply(a,i||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,l=1;l<r.length;l++){var u=r[l];0!==o[u]&&(n=!1)}n&&(a.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},o={app:0},a=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var s=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"532d":function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("a79d");var n=r("7a23");function o(e,t,r,o,a,c){const l=Object(n["x"])("router-view");return Object(n["p"])(),Object(n["d"])(Object(n["y"])(a.layout),null,{default:Object(n["H"])(()=>[Object(n["g"])(l,{layout:a.layout,"onUpdate:layout":t[1]||(t[1]=e=>a.layout=e)},null,8,["layout"])]),_:1})}var a={name:"App",data(){return{layout:"div"}}};r("bc43");a.render=o;var c=a,l=r("6c02"),u=(r("ddb0"),r("5502"));const i=()=>({counter:0}),s={counter:e=>e.counter},b={setCounter({commit:e},t){e("setCounter",t)},resetCounter({commit:e}){e("setCounter",{counter:0})},updateCounter({commit:e}){e("incrementCounter")}},d={setCounter(e,t){e.counter=t.counter},incrementCounter(e){e.counter++}};var p={namespaced:!0,state:i,getters:s,actions:b,mutations:d},O=r("bc3a"),j=r.n(O);j.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const g={timeout:3e4},m=async({url:e,config:t=g})=>{try{const r=await j.a.get(e,t);return{data:r.data,error:!1}}catch(r){return{data:r.response.data,error:!0}}},f=async({url:e,data:t,config:r=g})=>{try{const n=await j.a.post(e,t,r);return{data:n.data,error:!1}}catch(n){return{data:n.response.data,error:!0}}},h="/api/current_user",v="/auth/local",y=()=>m({url:""+h}),w=e=>f({url:""+v,data:e}),A=async(e,{cb:t,types:r})=>{try{e.commit(r.PENDING);const{data:n,error:o}=await t();e.commit(o?r.FAILURE:r.SUCCESS,n)}catch(n){e.commit(r.FAILURE,n)}},C=e=>({FETCH:e+"_FETCH",SUCCESS:e+"_SUCCESS",FAILURE:e+"_FAILURE",PENDING:e+"_PENDING"}),E=C("AUTH"),I={accountType:null,credits:null,googlePicture:null,loggedIn:!1,username:null},S={data:I,error:null,failed:!1,loaded:!1,loading:!1},x=()=>S,F={auth:e=>e.data,error:e=>e.error,failed:e=>e.failed,loaded:e=>e.loaded,loading:e=>e.loading,loggedIn:e=>e.data.loggedIn},_={[E.FETCH]:e=>A(e,{cb:()=>y(),types:E})},U={[E.PENDING](e){e.loading=!0},[E.SUCCESS](e,t){const{googleId:r,id:n=null}=t||{},o=n?{...t,accountType:r?"google":"local",loggedIn:!0}:I;e.data=o,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[E.FAILURE](e,t){e.data=I,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var D={namespaced:!0,state:x,getters:F,actions:_,mutations:U},L=r("532d"),k=r.n(L);const T={async init({dispatch:e}){await e("auth/AUTH_FETCH")}};var H=T;const z=!1,N=Object(u["b"])({plugins:[...z?[Object(u["a"])()]:[]],actions:H,modules:{test:p,auth:D,countries:k.a},strict:z});var q=N;function P(e,t,r,o,a,c){const l=Object(n["x"])("auth"),u=Object(n["x"])("country"),i=Object(n["x"])("layout");return Object(n["p"])(),Object(n["d"])(i,{name:"LayoutDefault"},{default:Object(n["H"])(()=>[Object(n["g"])("div",null,[Object(n["g"])(l),Object(n["g"])(u)])]),_:1})}function $(e,t,r,o,a,c){return Object(n["w"])(e.$slots,"default")}var J={name:"Layout",inheritAttrs:!1,props:{name:{type:String,default:"div",required:!0}},emits:["update:layout"],created(){this.$emit("update:layout",this.name)}};J.render=$;var R=J;const G={id:"auth"},M=Object(n["g"])("br",null,null,-1),V=Object(n["g"])("br",null,null,-1),B=Object(n["g"])("br",null,null,-1),W=Object(n["g"])("br",null,null,-1),K=Object(n["g"])("br",null,null,-1),X=Object(n["g"])("br",null,null,-1),Y=Object(n["g"])("br",null,null,-1);function Z(e,t,r,o,a,c){return Object(n["p"])(),Object(n["d"])("div",G,[Object(n["g"])("button",{onClick:t[1]||(t[1]=e=>o.fetchAuth())},"Fetch Auth"),M,Object(n["f"])(" Count: "+Object(n["A"])(o.count)+" ",1),V,Object(n["f"])(" Has Data: "+Object(n["A"])(o.hasData)+" ",1),B,Object(n["f"])(" Initialized: "+Object(n["A"])(o.initialized)+" ",1),W,Object(n["f"])(" Loading: "+Object(n["A"])(o.loading),1),K,Object(n["f"])(" Reloading: "+Object(n["A"])(o.reloading)+" ",1),X,Object(n["f"])(" In Error: "+Object(n["A"])(o.inError)+" ",1),Y,Object(n["I"])(Object(n["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(n["A"])(JSON.stringify(o.auth,null,4)),513),[[n["F"],o.auth]]),Object(n["I"])(Object(n["g"])("pre",null,"There was an error!",512),[[n["F"],o.inError]]),Object(n["I"])(Object(n["g"])("pre",null,"There were "+Object(n["A"])(o.count)+" records found!",513),[[n["F"],o.hasData]]),Object(n["I"])(Object(n["g"])("pre",null,"reloading...",512),[[n["F"],o.reloading]])])}var Q={name:"Auth",setup(){const e=Object(u["c"])();return{fetchAuth:()=>e.dispatch("auth/fetch"),count:Object(n["b"])(()=>e.getters["auth/count"]),auth:Object(n["b"])(()=>e.getters["auth/all"]),hasData:Object(n["b"])(()=>e.getters["auth/hasData"]),loading:Object(n["b"])(()=>e.getters["auth/loading"]),inError:Object(n["b"])(()=>e.getters["auth/inError"]),initialized:Object(n["b"])(()=>e.getters["auth/initialized"]),reloading:Object(n["b"])(()=>e.getters["auth/reloading"])}}};Q.render=Z;var ee=Q;const te={id:"country"},re=Object(n["g"])("br",null,null,-1),ne=Object(n["g"])("br",null,null,-1),oe=Object(n["g"])("br",null,null,-1),ae=Object(n["g"])("br",null,null,-1),ce=Object(n["g"])("br",null,null,-1),le=Object(n["g"])("br",null,null,-1),ue=Object(n["g"])("br",null,null,-1),ie=Object(n["g"])("br",null,null,-1),se=Object(n["g"])("br",null,null,-1),be=Object(n["g"])("br",null,null,-1),de=Object(n["g"])("br",null,null,-1);function pe(e,t,r,o,a,c){return Object(n["p"])(),Object(n["d"])("div",te,[Object(n["f"])(" Visibility: "+Object(n["A"])(o.visibility)+" ",1),re,Object(n["g"])("button",{onClick:t[1]||(t[1]=e=>o.fetchCountries())},"Fetch Countries"),ne,Object(n["g"])("button",{onClick:t[2]||(t[2]=Object(n["J"])(e=>o.visibility="merica",["prevent"]))},"America First!"),oe,Object(n["f"])(" Total Count: "+Object(n["A"])(o.count)+" ",1),ae,Object(n["f"])(" Filtered Count: "+Object(n["A"])(o.filteredCountries?o.filteredCountries.length:null)+" ",1),ce,Object(n["f"])(" Has Data: "+Object(n["A"])(o.hasData)+" ",1),le,Object(n["f"])(" Initialized: "+Object(n["A"])(o.initialized)+" ",1),ue,Object(n["f"])(" Loading: "+Object(n["A"])(o.loading),1),ie,Object(n["f"])(" Reloading: "+Object(n["A"])(o.reloading)+" ",1),se,Object(n["f"])(" In Error: "+Object(n["A"])(o.inError)+" ",1),be,Object(n["I"])(Object(n["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(n["A"])(JSON.stringify(o.filteredCountries,null,4)),513),[[n["F"],o.filteredCountries]]),Object(n["I"])(Object(n["g"])("pre",null,"There was an error!",512),[[n["F"],o.inError]]),Object(n["I"])(Object(n["g"])("pre",null,"There were "+Object(n["A"])(o.count)+" records found!",513),[[n["F"],o.hasData]]),Object(n["I"])(Object(n["g"])("pre",null,"reloading...",512),[[n["F"],o.reloading]]),Object(n["I"])(Object(n["g"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.countryCode=e),type:"text"},null,512),[[n["E"],o.countryCode]]),Object(n["g"])("button",{onClick:t[4]||(t[4]=e=>o.visibility="lookup")},"Search Countries"),de,Object(n["I"])(Object(n["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(n["A"])(JSON.stringify(o.lookupCountry,null,4)),513),[[n["F"],"lookup"===o.visibility]])])}const Oe={all:e=>e,merica:e=>e.filter(e=>"US"===e.countryCode),lookup:(e,t)=>e.filter(e=>e.countryCode===t)};var je={name:"Country",setup(){const e=Object(n["u"])("all"),t=Object(n["u"])(""),r=Object(u["c"])(),o=Object(n["b"])(()=>r.state.countries.data),a=Object(n["b"])(()=>Oe[e.value](o.value)),c=Object(n["b"])(()=>Oe[e.value](o.value,t.value));return{fetchCountries:()=>r.dispatch("countries/fetch"),count:Object(n["b"])(()=>r.getters["countries/count"]),filteredCountries:a,lookupCountry:c,hasData:Object(n["b"])(()=>r.getters["countries/hasData"]),inError:Object(n["b"])(()=>r.getters["countries/inError"]),initialized:Object(n["b"])(()=>r.getters["countries/initialized"]),loading:Object(n["b"])(()=>r.getters["countries/loading"]),reloading:Object(n["b"])(()=>r.getters["countries/reloading"]),visibility:e,countryCode:t}}};je.render=pe;var ge=je,me={name:"ApiTester",components:{Auth:ee,Country:ge,Layout:R}};me.render=P;var fe=me;function he(e,t,r,o,a,c){const l=Object(n["x"])("layout");return Object(n["p"])(),Object(n["d"])(l,null,{default:Object(n["H"])(()=>[Object(n["w"])(e.$slots,"default")]),_:3})}var ve={name:"AuthSuccess",components:{Layout:R},created(){window.document.body.style.display="none",window.opener&&(window.opener.open("/dashboard","_self"),window.opener.focus(),window.close())}};ve.render=he;var ye=ve;const we=Object(n["g"])("h1",null,"Welcome to the Dashboard",-1);function Ae(e,t,r,o,a,c){return Object(n["p"])(),Object(n["d"])("div",null,[we])}var Ce={name:"Dashboard"};Ce.render=Ae;var Ee=Ce;function Ie(e,t,r,o,a,c){const l=Object(n["x"])("LoginForm"),u=Object(n["x"])("layout");return Object(n["p"])(),Object(n["d"])(u,{name:"LayoutDefault"},{default:Object(n["H"])(()=>[Object(n["g"])(l)]),_:1})}const Se=Object(n["K"])("data-v-37a0b419");Object(n["s"])("data-v-37a0b419");const xe={class:"login"},Fe={class:"login__google-signin google-signin"},_e=Object(n["g"])("span",{class:"google-signin__icon"},null,-1),Ue=Object(n["g"])("span",{class:"google-signin__text"},"Login with Google",-1),De={key:0},Le={class:"form-input"},ke={class:"form-input"};Object(n["q"])();const Te=Se((e,t,r,o,a,c)=>{const l=Object(n["x"])("ui-input");return Object(n["p"])(),Object(n["d"])("div",xe,[Object(n["g"])("div",Fe,[Object(n["g"])("div",{class:"google-signin__btn",onClick:t[1]||(t[1]=e=>o.popup("/auth/google","google_login",500,500))},[_e,Ue])]),Object(n["g"])("form",{class:"login-form",onSubmit:t[6]||(t[6]=Object(n["J"])((...e)=>o.loginUser&&o.loginUser(...e),["prevent"]))},[e.errors&&!e.isDirty&&e.message?(Object(n["p"])(),Object(n["d"])("div",De,Object(n["A"])(e.message),1)):Object(n["e"])("",!0),Object(n["g"])("div",Le,[Object(n["g"])(l,{value:e.username,"onUpdate:value":t[2]||(t[2]=t=>e.username=t),errors:e.errors["username"],label:"Username",name:"username",type:"text",tabindex:"1",onInput:t[3]||(t[3]=e=>o.validate("username"))},null,8,["value","errors"])]),Object(n["g"])("div",ke,[Object(n["g"])(l,{value:e.password,"onUpdate:value":t[4]||(t[4]=t=>e.password=t),errors:e.errors["password"],label:"Password",name:"password",type:"password",tabindex:"2",onInput:t[5]||(t[5]=e=>o.validate("password"))},null,8,["value","errors"])]),Object(n["g"])("input",{type:"submit",value:"Login",disabled:!e.isDirty||e.hasErrors||e.loading,tabindex:"3"},null,8,["disabled"])],32)])});var He=r("506a");function ze(e,t,r,o,a,c){const l=Object(n["x"])("ui-error");return Object(n["p"])(),Object(n["d"])("label",null,[Object(n["f"])(Object(n["A"])(r.label)+" ",1),Object(n["I"])(Object(n["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.input=e),autocomplete:"autocomplete ? 'on' : null",class:c.classes,name:r.name,type:r.type},null,10,["name","type"]),[[n["D"],o.input]]),r.errors?(Object(n["p"])(),Object(n["d"])(l,{key:0,errors:r.errors},null,8,["errors"])):Object(n["e"])("",!0)])}const Ne={key:0};function qe(e,t,r,o,a,c){return Object(n["p"])(),Object(n["d"])("div",null,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(r.errors,(e,t)=>(Object(n["p"])(),Object(n["d"])("ul",{key:t},[e?(Object(n["p"])(),Object(n["d"])("li",Ne,Object(n["A"])(e),1)):Object(n["e"])("",!0)]))),128))])}var Pe={name:"UiError",props:{errors:{type:Array,default:()=>[],required:!1}}};Pe.render=qe;var $e=Pe,Je={name:"UiInput",components:{UiError:$e},props:{autocomplete:{type:Boolean},errors:{type:[Array,String],default:"",required:!1},label:{type:String,default:"",required:!1},name:{type:String,required:!0},type:{type:String,default:"text",required:!0},value:{type:String}},emits:["update:value"],setup(e,{emit:t}){const r=Object(n["b"])({get:()=>e.value,set:e=>t("update:value",e)});return{input:r}},computed:{classes(){return{"ui-input":!0}}}};Je.render=ze;var Re=Je,Ge={name:"LoginForm",components:{UiInput:Re},setup(){const e=Object(u["c"])(),t=Object(l["c"])(),r=Object(n["t"])({username:"",password:"",loading:!1,isDirty:Object(n["b"])(()=>!(!r.username||!r.password)),errors:{},hasErrors:Object(n["b"])(()=>Object.keys(r.errors).some(e=>!!r.errors[e])),message:""}),o=Object(He["a"])({username:Object(He["b"])().required(),password:Object(He["b"])().required()});function a(e){o.validateAt(e,{username:r.username,password:r.password}).then(()=>{r.errors[e]=""}).catch(t=>{r.errors[e]=t.errors})}function c(){o.validate({username:r.username,password:r.password},{abortEarly:!1}).then(()=>(r.loading=!0,w({username:r.username,password:r.password}).then(e=>{const{error:t,data:n}=e||{};if(t)throw r.errors={},r.loading=!1,r.password="",r.username="",r.message=n.message,new Error("LoginFailed")}).then(()=>e.dispatch("auth/"+E.FETCH)).then(()=>t.push({name:"dashboard"})).catch(()=>{}))).catch(e=>{e.inner.forEach(e=>{r.errors[e.path]=e.errors})})}const i=(e,t,r,n,o=window)=>{const a=o.top.outerHeight/2+o.top.screenY-n/2,c=o.top.outerWidth/2+o.top.screenX-r/2,l=`rel=opener, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${n}, top=${a}, left=${c}`;o.open(e,t,l)};return{loginUser:c,popup:i,validate:a,...Object(n["B"])(r)}}};r("8b22");Ge.render=Te,Ge.__scopeId="data-v-37a0b419";var Me=Ge,Ve={name:"Login",components:{Layout:R,LoginForm:Me}};Ve.render=Ie;var Be=Ve;const We=Object(n["g"])("h1",null,"Not Found",-1);function Ke(e,t,r,o,a,c){return Object(n["p"])(),Object(n["d"])("div",null,[We])}var Xe={name:"NotFound"};Xe.render=Ke;var Ye=Xe;const Ze=q.dispatch("init"),Qe=Object(n["b"])(()=>q.getters["auth/loggedIn"]),et=[{path:"/",name:"home",component:fe,props:!1},{path:"/login",name:"login",component:Be,meta:{guest:!0}},{path:"/dashboard",name:"dashboard",component:Ee,props:!0,meta:{requiresAuth:!0}},{path:"/success",name:"success",component:ye,props:!0,meta:{}},{path:"/:catchAll(.*)",name:"notfound",component:Ye}],tt=Object(l["a"])({history:Object(l["b"])(),routes:et});tt.beforeEach((e,t,r)=>{Ze.then(r).catch(e=>console.log("Unable to initialize store",e))}),tt.beforeEach((e,t,r)=>{e.matched.some(e=>e.meta.guest)?Qe.value?r({name:"dashboard"}):r():e.matched.some(e=>e.meta.requiresAuth)?Qe.value?r():r({name:"login"}):r()});var rt=tt;const nt={class:"p-4"},ot={class:"app-header"},at={class:"container"};function ct(e,t,r,o,a,c){const l=Object(n["x"])("app-nav");return Object(n["p"])(),Object(n["d"])("div",nt,[Object(n["g"])("header",ot,[Object(n["g"])(l)]),Object(n["g"])("main",at,[Object(n["w"])(e.$slots,"default")])])}function lt(e,t,r,o,a,c){return Object(n["p"])(),Object(n["d"])("div",null,"I am nav!!!")}var ut={name:"AppNav",setup(){return{}}};ut.render=lt;var it=ut,st={name:"LayoutDefault",components:{AppNav:it}};st.render=ct;var bt=st;const dt=[bt];var pt={install:(e,t)=>{dt.forEach(t=>{e.component(t.name,t)})}};Object(n["c"])(c).use(q).use(rt).use(pt).mount("#quizdini")},6423:function(e,t,r){},"8b22":function(e,t,r){"use strict";r("6423")},bc43:function(e,t,r){"use strict";r("f50f")},f50f:function(e,t,r){}});
//# sourceMappingURL=app.aad6abc3.js.map