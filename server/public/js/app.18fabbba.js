(function(e){function t(t){for(var a,c,s=t[0],u=t[1],i=t[2],d=0,b=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&b.push(n[c][0]),n[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(b.length)b.shift()();return o.push.apply(o,i||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,s=1;s<r.length;s++){var u=r[s];0!==n[u]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var a={},n={app:0},o=[];function c(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=a,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(r,a,function(t){return e[t]}.bind(null,a));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var l=u;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00ea":function(e,t,r){},"361e":function(e,t,r){"use strict";r("00ea")},4782:function(e,t,r){"use strict";r("48ec")},"48ec":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("a79d");var a=r("7a23");function n(e,t,r,n,o,c){const s=Object(a["A"])("router-view");return Object(a["s"])(),Object(a["d"])(Object(a["B"])(o.layout),null,{default:Object(a["I"])(()=>[Object(a["g"])(s,{layout:o.layout,"onUpdate:layout":t[1]||(t[1]=e=>o.layout=e)},null,8,["layout"])]),_:1})}var o={name:"App",data(){return{layout:"div"}}};r("bc43");o.render=n;var c=o,s=r("6c02");const u=Object(a["g"])("div",null,null,-1);function i(e,t,r,n,o,c){const s=Object(a["A"])("layout");return Object(a["s"])(),Object(a["d"])(s,{name:"LayoutDefault"},{default:Object(a["I"])(()=>[u]),_:1})}var l={name:"ApiTester",components:{}};l.render=i;var d=l;function b(e,t,r,n,o,c){const s=Object(a["A"])("layout");return Object(a["s"])(),Object(a["d"])(s,null,{default:Object(a["I"])(()=>[Object(a["z"])(e.$slots,"default")]),_:3})}var p={name:"AuthSuccess",created(){window.document.body.style.display="none",window.opener&&(window.opener.open("/dashboard","_self"),window.opener.focus(),window.close())}};p.render=b;var O=p;const m=Object(a["g"])("h1",null,"Welcome to the Dashboard",-1);function j(e,t,r,n,o,c){const s=Object(a["A"])("layout");return Object(a["s"])(),Object(a["d"])(s,{name:"LayoutDefault"},{default:Object(a["I"])(()=>[m]),_:1})}var g={name:"Dashboard"};g.render=j;var v=g;function f(e,t,r,n,o,c){const s=Object(a["A"])("LoginForm"),u=Object(a["A"])("layout");return Object(a["s"])(),Object(a["d"])(u,{name:"LayoutDefault"},{default:Object(a["I"])(()=>[Object(a["g"])(s)]),_:1})}r("ddb0");const y=Object(a["L"])("data-v-557beb81");Object(a["v"])("data-v-557beb81");const h={class:"login"},_={class:"login__google-signin google-signin"},w=Object(a["g"])("span",{class:"google-signin__icon"},null,-1),I=Object(a["g"])("span",{class:"google-signin__text"},"Login with Google",-1),S={key:0},E={class:"form-input"},A={class:"form-input"},C={class:"form-input"};Object(a["t"])();const U=y((e,t,r,n,o,c)=>{const s=Object(a["A"])("ui-input");return Object(a["s"])(),Object(a["d"])("div",h,[Object(a["g"])("div",_,[Object(a["g"])("div",{class:"google-signin__btn",onClick:t[1]||(t[1]=e=>n.popup("/auth/google","google_login",500,500))},[w,I])]),Object(a["g"])("form",{class:"login__form",onSubmit:t[6]||(t[6]=Object(a["K"])((...e)=>n.loginUser&&n.loginUser(...e),["prevent"]))},[e.errors&&!e.isDirty&&e.message?(Object(a["s"])(),Object(a["d"])("div",S,Object(a["D"])(e.message),1)):Object(a["e"])("",!0),Object(a["g"])("div",E,[Object(a["g"])(s,{value:e.username,"onUpdate:value":t[2]||(t[2]=t=>e.username=t),errors:e.errors["username"],label:"Username",name:"username",type:"text",tabindex:"1",onInput:t[3]||(t[3]=e=>n.validate("username"))},null,8,["value","errors"])]),Object(a["g"])("div",A,[Object(a["g"])(s,{value:e.password,"onUpdate:value":t[4]||(t[4]=t=>e.password=t),errors:e.errors["password"],label:"Password",name:"password",type:"password",tabindex:"2",onInput:t[5]||(t[5]=e=>n.validate("password"))},null,8,["value","errors"])]),Object(a["g"])("div",C,[Object(a["g"])("input",{type:"submit",value:"Login",disabled:!e.isDirty||e.hasErrors||e.loading,tabindex:"3"},null,8,["disabled"])])],32)])});var D=r("506a"),F=r("5502"),L=r("bc3a"),k=r.n(L);k.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const T={timeout:3e4},q=async({url:e,config:t=T})=>{try{const r=await k.a.get(e,t);return{data:r.data,error:!1}}catch(r){return{data:r.response.data,error:!0}}},N=async({url:e,data:t,config:r=T})=>{try{const a=await k.a.post(e,t,r);return{data:a.data,error:!1}}catch(a){return{data:a.response.data,error:!0}}},P="/api/current_user",x="/auth/local",R=()=>q({url:""+P}),H=e=>N({url:""+x,data:e});function z(e,t,r,n,o,c){const s=Object(a["A"])("ui-error");return Object(a["s"])(),Object(a["d"])("label",null,[Object(a["f"])(Object(a["D"])(r.label)+" ",1),Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.input=e),autocomplete:"autocomplete ? 'on' : null",class:c.classes,name:r.name,type:r.type},null,10,["name","type"]),[[a["G"],n.input]]),r.errors?(Object(a["s"])(),Object(a["d"])(s,{key:0,errors:r.errors},null,8,["errors"])):Object(a["e"])("",!0)])}const $={key:0};function G(e,t,r,n,o,c){return Object(a["s"])(),Object(a["d"])("div",null,[(Object(a["s"])(!0),Object(a["d"])(a["a"],null,Object(a["y"])(r.errors,(e,t)=>(Object(a["s"])(),Object(a["d"])("ul",{key:t},[e?(Object(a["s"])(),Object(a["d"])("li",$,Object(a["D"])(e),1)):Object(a["e"])("",!0)]))),128))])}var M={name:"UiError",props:{errors:{type:Array,default:()=>[],required:!1}}};M.render=G;var J=M,B={name:"UiInput",components:{UiError:J},props:{autocomplete:{type:Boolean},errors:{type:[Array,String],default:"",required:!1},label:{type:String,default:"",required:!1},name:{type:String,required:!0},type:{type:String,default:"text",required:!0},value:{type:String}},emits:["update:value"],setup(e,{emit:t}){const r=Object(a["b"])({get:()=>e.value,set:e=>t("update:value",e)});return{input:r}},computed:{classes(){return{"ui-input":!0}}}};B.render=z;var V=B;const K=e=>({FETCH:e+"_FETCH",SUCCESS:e+"_SUCCESS",FAILURE:e+"_FAILURE",PENDING:e+"_PENDING"}),W=K("AUTH"),Q=K("COUNTRIES");var X={name:"LoginForm",components:{UiInput:V},setup(){const e=Object(F["c"])(),t=Object(s["c"])(),r=Object(a["w"])({username:"",password:"",loading:!1,isDirty:Object(a["b"])(()=>!(!r.username||!r.password)),errors:{},hasErrors:Object(a["b"])(()=>Object.keys(r.errors).some(e=>!!r.errors[e])),message:""}),n=Object(D["a"])({username:Object(D["b"])().required(),password:Object(D["b"])().required()});function o(e){n.validateAt(e,{username:r.username,password:r.password}).then(()=>{r.errors[e]=""}).catch(t=>{r.errors[e]=t.errors})}function c(){n.validate({username:r.username,password:r.password},{abortEarly:!1}).then(()=>(r.loading=!0,H({username:r.username,password:r.password}).then(e=>{const{error:t,data:a}=e||{};if(t)throw r.errors={},r.loading=!1,r.password="",r.username="",r.message=a.message,new Error("LoginFailed")}).then(()=>e.dispatch("auth/"+W.FETCH)).then(()=>t.push({name:"dashboard"})).catch(()=>{}))).catch(e=>{e.inner.forEach(e=>{r.errors[e.path]=e.errors})})}const u=(e,t,r,a,n=window)=>{const o=n.top.outerHeight/2+n.top.screenY-a/2,c=n.top.outerWidth/2+n.top.screenX-r/2,s=`rel=opener, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${a}, top=${o}, left=${c}`;n.open(e,t,s)};return{loginUser:c,popup:u,validate:o,...Object(a["E"])(r)}}};r("f5ff");X.render=U,X.__scopeId="data-v-557beb81";var Y=X;const Z={class:"register"},ee={key:0},te={class:"form-input"},re={class:"form-input"};function ae(e,t,r,n,o,c){const s=Object(a["A"])("ui-datalist");return Object(a["s"])(),Object(a["d"])("div",Z,[Object(a["g"])("form",{class:"register__form",onSubmit:t[5]||(t[5]=Object(a["K"])((...t)=>e.loginUser&&e.loginUser(...t),["prevent"]))},[e.errors&&!e.isDirty&&e.message?(Object(a["s"])(),Object(a["d"])("div",ee,Object(a["D"])(e.message),1)):Object(a["e"])("",!0),Object(a["g"])("div",te,[Object(a["g"])(s,{id:"countries",value:e.countrySearch,"onUpdate:value":t[1]||(t[1]=t=>e.countrySearch=t),code:e.countryCode,"onUpdate:code":t[2]||(t[2]=t=>e.countryCode=t),options:n.countries,label:"Country",name:"country",errors:e.errors["country"],tabindex:"1",onBlur:t[3]||(t[3]=e=>n.validate("country")),onInput:t[4]||(t[4]=t=>e.errors["country"]&&n.validate("country"))},null,8,["value","code","options","errors"])]),Object(a["g"])("div",re,[Object(a["g"])("input",{type:"submit",value:"Register",disabled:!e.isDirty||e.hasErrors||e.loading,tabindex:"2"},null,8,["disabled"])])],32)])}const ne=Object(a["L"])("data-v-cac4bc9e");Object(a["v"])("data-v-cac4bc9e");const oe={id:"id"};Object(a["t"])();const ce=ne((e,t,r,n,o,c)=>{const s=Object(a["A"])("ui-error");return Object(a["s"])(),Object(a["d"])("label",null,[Object(a["f"])(Object(a["D"])(r.label)+" ",1),Object(a["J"])(Object(a["g"])("input",Object(a["m"])({"onUpdate:modelValue":t[1]||(t[1]=e=>n.input=e),list:"id",class:c.classes,name:r.name},e.$attrs,{onInput:t[2]||(t[2]=e=>n.onInputChange(e))}),null,16,["name"]),[[a["G"],n.input]]),Object(a["g"])("datalist",oe,[(Object(a["s"])(!0),Object(a["d"])(a["a"],null,Object(a["y"])(r.options,e=>(Object(a["s"])(),Object(a["d"])("option",{key:e.key,"data-value":e.value},Object(a["D"])(e.text),9,["data-value"]))),128))]),r.errors?(Object(a["s"])(),Object(a["d"])(s,{key:0,errors:r.errors},null,8,["errors"])):Object(a["e"])("",!0)])});var se={name:"UiDatalist",components:{UiError:J},inheritAttr:!1,props:{code:{type:String},errors:{type:[Array,String],default:"",required:!1},id:{type:String,required:!0},label:{type:String,default:"",required:!1},name:{type:String,required:!0},options:{type:[Array],required:!0},value:{type:String}},emits:["update:value","update:code"],setup(e,{emit:t}){const r=Object(a["b"])({get:()=>e.value,set:e=>t("update:value",e)}),n=e=>{const r=Array.from(e.target.list.options).find(t=>t.innerHTML===e.target.value);t("update:code",r?r.dataset["value"]:"")};return{input:r,onInputChange:n}},computed:{classes(){return{"ui-datalist":!0}}}};r("4782");se.render=ce,se.__scopeId="data-v-cac4bc9e";var ue=se;function ie(){const e=Object(F["c"])(),t=()=>e.dispatch("countries/"+Q.FETCH),r=Object(a["b"])(()=>e.getters["countries/options"]),n=Object(a["b"])(()=>e.getters["countries/error"]),o=Object(a["b"])(()=>e.getters["countries/failed"]),c=Object(a["b"])(()=>e.getters["countries/loaded"]),s=Object(a["b"])(()=>e.getters["countries/loading"]);return Object(a["q"])(()=>{c.value||t()}),{countries:r,error:n,failed:o,loaded:c,loading:s}}var le={name:"RegisterForm",components:{UiDatalist:ue},setup(){const{countries:e}=ie(),t=Object(a["w"])({countryCode:"",countrySearch:"",errors:{},hasErrors:Object(a["b"])(()=>Object.keys(t.errors).some(e=>!!t.errors[e])),isDirty:Object(a["b"])(()=>!!t.countryCode),loading:!1,message:""}),r=Object(D["a"])({country:Object(D["b"])().required("Valid country is required")});function n(e){r.validateAt(e,{country:t.countryCode}).then(()=>{t.errors[e]=""}).catch(r=>{t.errors[e]=r.errors})}return{countries:e,validate:n,...Object(a["E"])(t)}}};le.render=ae;var de=le,be={name:"Login",components:{LoginForm:Y}};be.render=f;var pe=be;const Oe=Object(a["g"])("h1",null,"Not Found",-1);function me(e,t,r,n,o,c){return Object(a["s"])(),Object(a["d"])("div",null,[Oe])}var je={name:"NotFound"};je.render=me;var ge=je;function ve(e,t,r,n,o,c){const s=Object(a["A"])("RegisterForm"),u=Object(a["A"])("layout");return Object(a["s"])(),Object(a["d"])(u,{name:"LayoutDefault"},{default:Object(a["I"])(()=>[Object(a["g"])(s)]),_:1})}var fe={name:"Register",components:{RegisterForm:de}};fe.render=ve;var ye=fe;const he=[{path:"/",name:"home",component:d,meta:{navItem:!0},props:!1},{path:"/",name:"register",component:ye,meta:{navItem:!0,guest:!0},props:!1},{path:"/login",name:"login",component:pe,meta:{navItem:!0,guest:!0}},{path:"/dashboard",name:"dashboard",component:v,meta:{navItem:!0,auth:!0},props:!0},{path:"/success",name:"success",component:O,meta:{navItem:!1},props:!0},{path:"/:catchAll(.*)",name:"notfound",component:ge,meta:{navItem:!1}}];var _e=he;const we=()=>({counter:0}),Ie={counter:e=>e.counter},Se={setCounter({commit:e},t){e("setCounter",t)},resetCounter({commit:e}){e("setCounter",{counter:0})},updateCounter({commit:e}){e("incrementCounter")}},Ee={setCounter(e,t){e.counter=t.counter},incrementCounter(e){e.counter++}};var Ae={namespaced:!0,state:we,getters:Ie,actions:Se,mutations:Ee};const Ce=async(e,{cb:t,types:r})=>{try{e.commit(r.PENDING);const{data:a,error:n}=await t();e.commit(n?r.FAILURE:r.SUCCESS,a)}catch(a){e.commit(r.FAILURE,a)}},Ue={accountType:null,credits:null,googlePicture:null,authenticated:!1,username:null},De={data:Ue,error:null,failed:!1,loaded:!1,loading:!1},Fe=()=>De,Le={accountType:e=>e.accountType,auth:e=>e.data,authenticated:e=>e.data.authenticated,credits:e=>e.data.credits,error:e=>e.error,failed:e=>e.failed,googlePicture:e=>e.googlePicture,loaded:e=>e.loaded,loading:e=>e.loading},ke={[W.FETCH]:e=>Ce(e,{cb:()=>R(),types:W})},Te={[W.PENDING](e){e.loading=!0},[W.SUCCESS](e,t){const{googleId:r,id:a=null}=t||{},n=a?{...t,accountType:r?"google":"local",authenticated:!0}:Ue;e.data=n,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[W.FAILURE](e,t){e.data=Ue,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var qe={namespaced:!0,state:Fe,getters:Le,actions:ke,mutations:Te};r("13d5");const Ne="/api/countries",Pe=()=>q({url:""+Ne}),xe={data:[],error:null,failed:!1,loaded:!1,loading:!1},Re=()=>xe,He={all:e=>e.data,options:e=>e.data.reduce((e,t)=>(e.push({key:t.countryId,value:t.countryCode,text:t.countryName}),e),[]),error:e=>e.error,failed:e=>e.failed,loaded:e=>e.loaded,loading:e=>e.loading},ze={[Q.FETCH]:e=>Ce(e,{cb:()=>Pe(),types:Q})},$e={[Q.PENDING](e){e.loading=!0},[Q.SUCCESS](e,t){e.data=t,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[Q.FAILURE](e,t){e.data=null,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var Ge={namespaced:!0,state:Re,getters:He,actions:ze,mutations:$e};const Me={async init({dispatch:e}){await e("auth/AUTH_FETCH")}};var Je=Me;const Be=!1,Ve=Object(F["b"])({plugins:[...Be?[Object(F["a"])()]:[]],actions:Je,modules:{test:Ae,auth:qe,countries:Ge},strict:Be});var Ke=Ve;const We=Ke.dispatch("init"),Qe=Object(a["b"])(()=>Ke.getters["auth/authenticated"]),Xe=Object(s["a"])({history:Object(s["b"])(),routes:_e});Xe.beforeEach((e,t,r)=>{We.then(r).catch(e=>console.log("Unable to initialize store",e))}),Xe.beforeEach((e,t,r)=>{e.matched.some(e=>e.meta.guest)?Qe.value?r({name:"dashboard"}):r():e.matched.some(e=>e.meta.auth)?Qe.value?r():r({name:"login"}):r()});var Ye=Xe;function Ze(e,t,r,n,o,c){return Object(a["z"])(e.$slots,"default")}var et={name:"Layout",inheritAttrs:!1,props:{name:{type:String,default:"div",required:!0}},emits:["update:layout"],created(){this.$emit("update:layout",this.name)}};et.render=Ze;var tt=et;const rt=Object(a["L"])("data-v-092b3d2c");Object(a["v"])("data-v-092b3d2c");const at={class:"app"},nt={class:"app__header"},ot={class:"app__main"},ct=Object(a["g"])("footer",{class:"app__footer"},"© Quizdini 2013-21",-1);Object(a["t"])();const st=rt((e,t,r,n,o,c)=>{const s=Object(a["A"])("app-nav");return Object(a["s"])(),Object(a["d"])("div",at,[Object(a["g"])("header",nt,[Object(a["g"])(s,{class:"app__nav"})]),Object(a["g"])("main",ot,[Object(a["z"])(e.$slots,"default")]),ct])}),ut={class:"nav"},it={key:0,class:"nav__item"},lt={key:1,href:"/logout",class:"nav__item",target:"_self"},dt={key:2,class:"nav__item badge"},bt={key:3,class:"nav__item nav__item--lc"};function pt(e,t,r,n,o,c){const s=Object(a["A"])("NavItems");return Object(a["s"])(),Object(a["d"])("nav",ut,[Object(a["g"])(s,{items:n.routes,authenticated:n.auth.authenticated},null,8,["items","authenticated"]),n.auth.authenticated&&n.auth.credits>=0?(Object(a["s"])(),Object(a["d"])("span",it,"Credits: "+Object(a["D"])(n.auth.credits),1)):Object(a["e"])("",!0),n.auth.authenticated?(Object(a["s"])(),Object(a["d"])("a",lt,"logout")):Object(a["e"])("",!0),n.auth.authenticated&&"google"===n.auth.accountType?(Object(a["s"])(),Object(a["d"])("span",dt,["google"===n.auth.accountType?(Object(a["s"])(),Object(a["d"])("img",{key:0,src:n.auth.googlePicture,class:"badge--google"},null,8,["src"])):Object(a["e"])("",!0)])):Object(a["e"])("",!0),n.auth.authenticated&&"local"===n.auth.accountType?(Object(a["s"])(),Object(a["d"])("span",bt,Object(a["D"])(n.auth.username),1)):Object(a["e"])("",!0)])}function Ot(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(a["l"])(e)}const mt=({items:e,authenticated:t})=>e.filter(e=>{const{meta:{navItem:r=!1,auth:a=!1,guest:n=!1}={}}=e;return!!r&&(t?a||!n:!a)}).map(e=>{const{name:t}=e;return Object(a["g"])(Object(a["A"])("router-link"),{class:"nav__item",to:{name:t},key:t},Ot(t)?t:{default:()=>[t]})});var jt={name:"AppNav",components:{NavItems:mt},setup(){const e=Object(F["c"])(),t=Object(a["b"])(()=>e.getters["auth/auth"]);return{auth:t,routes:_e}}};r("cab4");jt.render=pt;var gt=jt,vt={name:"LayoutDefault",components:{AppNav:gt}};r("361e");vt.render=st,vt.__scopeId="data-v-092b3d2c";var ft=vt;const yt=[tt,ft];var ht={install:(e,t)=>{yt.forEach(t=>{e.component(t.name,t)})}};Object(a["c"])(c).use(Ke).use(Ye).use(ht).mount("#quizdini")},"873f":function(e,t,r){},bc43:function(e,t,r){"use strict";r("f50f")},cab4:function(e,t,r){"use strict";r("e602")},e602:function(e,t,r){},f50f:function(e,t,r){},f5ff:function(e,t,r){"use strict";r("873f")}});
//# sourceMappingURL=app.18fabbba.js.map