(function(e){function t(t){for(var n,c,l=t[0],u=t[1],i=t[2],d=0,b=[];d<l.length;d++)c=l[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&b.push(a[c][0]),a[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);s&&s(t);while(b.length)b.shift()();return o.push.apply(o,i||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,l=1;l<r.length;l++){var u=r[l];0!==a[u]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var s=u;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("a79d");var n=r("7a23");function a(e,t,r,a,o,c){const l=Object(n["r"])("router-view");return Object(n["n"])(),Object(n["c"])(l)}var o={name:"App"};r("8874");o.render=a;var c=o,l=r("6c02");function u(e,t,r,a,o,c){const l=Object(n["r"])("Login"),u=Object(n["r"])("Auth"),i=Object(n["r"])("Country");return Object(n["n"])(),Object(n["c"])("div",null,[Object(n["e"])(l),Object(n["e"])(u),Object(n["e"])(i)])}const i={id:"auth"},s=Object(n["e"])("br",null,null,-1),d=Object(n["e"])("br",null,null,-1),b=Object(n["e"])("br",null,null,-1),O=Object(n["e"])("br",null,null,-1),j=Object(n["e"])("br",null,null,-1),p=Object(n["e"])("br",null,null,-1),g=Object(n["e"])("br",null,null,-1);function h(e,t,r,a,o,c){return Object(n["n"])(),Object(n["c"])("div",i,[Object(n["e"])("button",{onClick:t[1]||(t[1]=e=>a.fetchAuth())},"Fetch Auth"),s,Object(n["d"])(" Count: "+Object(n["t"])(a.count)+" ",1),d,Object(n["d"])(" Has Data: "+Object(n["t"])(a.hasData)+" ",1),b,Object(n["d"])(" Initialized: "+Object(n["t"])(a.initialized)+" ",1),O,Object(n["d"])(" Loading: "+Object(n["t"])(a.loading),1),j,Object(n["d"])(" Reloading: "+Object(n["t"])(a.reloading)+" ",1),p,Object(n["d"])(" In Error: "+Object(n["t"])(a.inError)+" ",1),g,Object(n["z"])(Object(n["e"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(n["t"])(JSON.stringify(a.auth,null,4)),513),[[n["x"],a.auth]]),Object(n["z"])(Object(n["e"])("pre",null,"There was an error!",512),[[n["x"],a.inError]]),Object(n["z"])(Object(n["e"])("pre",null,"There were "+Object(n["t"])(a.count)+" records found!",513),[[n["x"],a.hasData]]),Object(n["z"])(Object(n["e"])("pre",null,"reloading...",512),[[n["x"],a.reloading]])])}var m=r("5502"),f={setup(){const e=Object(m["c"])();return{fetchAuth:()=>e.dispatch("auth/fetch"),count:Object(n["a"])(()=>e.getters["auth/count"]),auth:Object(n["a"])(()=>e.getters["auth/all"]),hasData:Object(n["a"])(()=>e.getters["auth/hasData"]),loading:Object(n["a"])(()=>e.getters["auth/loading"]),inError:Object(n["a"])(()=>e.getters["auth/inError"]),initialized:Object(n["a"])(()=>e.getters["auth/initialized"]),reloading:Object(n["a"])(()=>e.getters["auth/reloading"])}}};f.render=h;var v=f;const y={id:"country"},w=Object(n["e"])("br",null,null,-1),C=Object(n["e"])("br",null,null,-1),z=Object(n["e"])("br",null,null,-1),x=Object(n["e"])("br",null,null,-1),I=Object(n["e"])("br",null,null,-1),S=Object(n["e"])("br",null,null,-1),A=Object(n["e"])("br",null,null,-1),D=Object(n["e"])("br",null,null,-1),E=Object(n["e"])("br",null,null,-1),L=Object(n["e"])("br",null,null,-1),k=Object(n["e"])("br",null,null,-1);function T(e,t,r,a,o,c){return Object(n["n"])(),Object(n["c"])("div",y,[Object(n["d"])(" Visibility: "+Object(n["t"])(a.visibility)+" ",1),w,Object(n["e"])("button",{onClick:t[1]||(t[1]=e=>a.fetchCountries())},"Fetch Countries"),C,Object(n["e"])("button",{onClick:t[2]||(t[2]=Object(n["A"])(e=>a.visibility="merica",["prevent"]))},"America First!"),z,Object(n["d"])(" Total Count: "+Object(n["t"])(a.count)+" ",1),x,Object(n["d"])(" Filtered Count: "+Object(n["t"])(a.filteredCountries?a.filteredCountries.length:null)+" ",1),I,Object(n["d"])(" Has Data: "+Object(n["t"])(a.hasData)+" ",1),S,Object(n["d"])(" Initialized: "+Object(n["t"])(a.initialized)+" ",1),A,Object(n["d"])(" Loading: "+Object(n["t"])(a.loading),1),D,Object(n["d"])(" Reloading: "+Object(n["t"])(a.reloading)+" ",1),E,Object(n["d"])(" In Error: "+Object(n["t"])(a.inError)+" ",1),L,Object(n["z"])(Object(n["e"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(n["t"])(JSON.stringify(a.filteredCountries,null,4)),513),[[n["x"],a.filteredCountries]]),Object(n["z"])(Object(n["e"])("pre",null,"There was an error!",512),[[n["x"],a.inError]]),Object(n["z"])(Object(n["e"])("pre",null,"There were "+Object(n["t"])(a.count)+" records found!",513),[[n["x"],a.hasData]]),Object(n["z"])(Object(n["e"])("pre",null,"reloading...",512),[[n["x"],a.reloading]]),Object(n["z"])(Object(n["e"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>a.countryCode=e)},null,512),[[n["w"],a.countryCode]]),Object(n["e"])("button",{onClick:t[4]||(t[4]=e=>a.visibility="lookup")},"Search Countries"),k,Object(n["z"])(Object(n["e"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(n["t"])(JSON.stringify(a.lookupCountry,null,4)),513),[[n["x"],"lookup"===a.visibility]])])}const q={all:e=>e,merica:e=>e.filter(e=>"US"===e.countryCode),lookup:(e,t)=>e.filter(e=>e.countryCode===t)};var P={name:"Country",setup(){const e=Object(n["q"])("all"),t=Object(n["q"])(""),r=Object(m["c"])(),a=Object(n["a"])(()=>r.state.countries.data),o=Object(n["a"])(()=>q[e.value](a.value)),c=Object(n["a"])(()=>q[e.value](a.value,t.value));return{fetchCountries:()=>r.dispatch("countries/fetch"),count:Object(n["a"])(()=>r.getters["countries/count"]),filteredCountries:o,lookupCountry:c,hasData:Object(n["a"])(()=>r.getters["countries/hasData"]),inError:Object(n["a"])(()=>r.getters["countries/inError"]),initialized:Object(n["a"])(()=>r.getters["countries/initialized"]),loading:Object(n["a"])(()=>r.getters["countries/loading"]),reloading:Object(n["a"])(()=>r.getters["countries/reloading"]),visibility:e,countryCode:t}}};P.render=T;var N=P;const U={id:"login"},F=Object(n["e"])("label",null,"Logged In",-1),_=Object(n["e"])("br",null,null,-1),H=Object(n["e"])("a",{href:"/api/logout"},"Logout",-1),J={class:"form-input"},G=Object(n["e"])("label",null,"Username:",-1),M={class:"form-input"},R=Object(n["e"])("label",null,"Password:",-1);function V(e,t,r,a,o,c){return Object(n["n"])(),Object(n["c"])("div",U,[F,Object(n["d"])(" "+Object(n["t"])(a.loggedIn),1),_,H,Object(n["d"])(" "+Object(n["t"])(a.error&&!a.isDirty?a.error:"")+" ",1),Object(n["e"])("div",J,[G,Object(n["z"])(Object(n["e"])("input",{type:"text",name:"username","onUpdate:modelValue":t[1]||(t[1]=e=>a.username=e)},null,512),[[n["w"],a.username]])]),Object(n["e"])("div",M,[R,Object(n["z"])(Object(n["e"])("input",{type:"password",name:"password","onUpdate:modelValue":t[2]||(t[2]=e=>a.password=e)},null,512),[[n["w"],a.password]])]),Object(n["e"])("button",{onClick:t[3]||(t[3]=Object(n["A"])(e=>a.toggleLogin^=!0,["prevent"])),disabled:a.loading||!a.isDirty},Object(n["t"])(a.loading?"Loading...":"Login"),9,["disabled"])])}var $=r("bc3a"),W=r.n($);W.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const Z={timeout:3e4},B=async({url:e,config:t=Z})=>{try{const r=await W.a.get(e,t);return{data:r.data}}catch(r){return{error:r.response.data}}},K=async({url:e,data:t,config:r=Z})=>{try{const n=await W.a.post(e,t,r);return{data:n.data}}catch(n){return{error:n.response.data}}},Q="/api/current_user",X="/auth/local",Y=()=>B({url:""+Q}),ee=e=>K({url:""+X,data:e});function te({callback:e,immediate:t=!0,deps:r=[]}){const a=Object(n["p"])({data:null,error:null,executions:0,failed:!1,initialized:!1,loaded:!1,loading:!1});return Object(n["y"])(r,async()=>{a.loading=!0;const t=await e(),{data:r=null,error:n=null}=t;a.data=r,a.error=n,a.executions+=1,a.initialized=!!a.executions,r&&(a.loaded=!0,a.failed=!1),n&&(a.loaded=!1,a.failed=!0),a.loading=!1},{immediate:t}),{...Object(n["u"])(a)}}var re={setup(){const e=Object(m["c"])(),t=Object(l["c"])(),r=Object(n["a"])(()=>e.state.auth.data.loggedIn),a=Object(n["q"])(""),o=Object(n["q"])(""),c=Object(n["q"])(0),u=Object(n["a"])(()=>!(!a.value&&!o.value)),{data:i,error:s,failed:d,loading:b,loaded:O}=te({callback:async()=>{const e=await ee({username:a.value,password:o.value});return a.value="",o.value="",e},immediate:!1,deps:[c]});return Object(n["y"])(O,()=>O&&e.dispatch("auth/fetch")),e.watch(e=>e.auth.data.loggedIn,()=>{console.log("state watcher fired!"),t.push({name:"dashboard"})}),{results:i,error:s,failed:d,loaded:O,loading:b,username:a,password:o,toggleLogin:c,isDirty:u,loggedIn:r}}};re.render=V;var ne=re,ae={name:"ApiTester",components:{Auth:v,Country:N,Login:ne}};ae.render=u;var oe=ae;const ce=Object(n["e"])("h1",null,"Welcome to the Dashboard",-1);function le(e,t,r,a,o,c){return Object(n["n"])(),Object(n["c"])("div",null,[ce])}var ue={};ue.render=le;var ie=ue;r("ddb0");const se=()=>({counter:0}),de={counter:e=>e.counter},be={setCounter({commit:e},t){e("setCounter",t)},resetCounter({commit:e}){e("setCounter",{counter:0})},updateCounter({commit:e}){e("incrementCounter")}},Oe={setCounter(e,t){e.counter=t.counter},incrementCounter(e){e.counter++}};var je={namespaced:!0,state:se,getters:de,actions:be,mutations:Oe};const pe={INIT:0,LOADING:1,FAILURE:2,SUCCESS:3},ge={status:pe.INIT,data:null,error:null},he={all:e=>e.data,count:e=>Array.isArray(e.data)?e.data.length:e.data?+!!e.data:null,hasData:e=>!!e.data,initialized:e=>!!e.data||!!e.error,inError:e=>!!e.error,loading:e=>e.status===pe.LOADING,reloading:e=>e.status===pe.LOADING&&(!!e.data||!!e.error)},me={load(){},process(){},setStatus(e,t){e.status=t}},fe=e=>{e.subscribe(t=>{const{payload:r}=t,[n,...a]=t.type.split("/").reverse(),o=a?a.join("/"):"",c=e=>`${o}${o?"/":""}${e}`;"load"===n&&e.commit(c("setStatus"),pe.LOADING),"process"===n&&(Object.prototype.hasOwnProperty.call(t.payload,"error")?(e.commit(c("failure"),r),e.commit(c("setStatus"),pe.FAILURE)):(e.commit(c("success"),r),e.commit(c("setStatus"),pe.SUCCESS)))})},ve={accountType:null,credits:null,googlePicture:null,error:null,loggedIn:!1,username:null},{error:ye,status:we}=ge,Ce=()=>({data:ve,error:ye,status:we}),ze={auth:e=>e.data,...he},xe={async fetch({commit:e}){e("load"),e("process",await Y())}},Ie={...me,success(e,{data:t}){const{googleId:r,id:n=null}=t||{},a=n?{...t,accountType:r?"google":"local",loggedIn:!0}:ve;e.data=a,e.error=null},failure(e,{error:t}){e.error=t,e.data=null}};var Se={namespaced:!0,state:Ce,getters:ze,actions:xe,mutations:Ie};const Ae="/api/countries",De=()=>B({url:""+Ae}),Ee=()=>({...ge}),Le={...he},ke={async fetch({commit:e}){e("load"),e("process",await De())}},Te={...me,success(e,{data:t}){e.data=t,e.error=null},failure(e,{error:t}){e.error=t,e.data=null}};var qe={namespaced:!0,state:Ee,getters:Le,actions:ke,mutations:Te};const Pe={async init({dispatch:e}){await e("auth/fetch")}};var Ne=Pe;const Ue=!1,Fe=Object(m["b"])({plugins:[...Ue?[Object(m["a"])()]:[],fe],actions:Ne,modules:{test:je,auth:Se,countries:qe},strict:Ue});var _e=Fe;const He=_e.dispatch("init"),Je=Object(n["a"])(()=>_e.state.auth.data.loggedIn),Ge=[{path:"/login",name:"login",component:ne,meta:{guest:!0}},{path:"/logout",redirect:"/api/logout"},{path:"/",name:"apitester",component:oe,props:!1},{path:"/api/logout",name:"logout"},{path:"/dashboard",name:"dashboard",component:ie,meta:{requiresAuth:!0}}],Me=Object(l["a"])({history:Object(l["b"])(),routes:Ge});Me.beforeEach((e,t,r)=>{console.log("initialization happens here..."),He.then(r).catch(e=>console.log("unable to initialize store",e))}),Me.beforeEach((e,t,r)=>{console.log("is authenticated",Je.value),e.matched.some(e=>e.meta.guest)?(console.log("route is guest only"),Je.value?(console.log("user is authenticated, i.e., not allowed"),r(!1)):(console.log("user not authenticated"),r())):e.matched.some(e=>e.meta.requiresAuth)?(console.log("route requires to be authenticated"),Je.value?(console.log("user is authenticated, i.e., allowed"),r()):r(!1)):(console.log("not a protected route; proceed"),r())});var Re=Me;Object(n["b"])(c).use(_e).use(Re).mount("#quizdini")},8874:function(e,t,r){"use strict";r("e906")},e906:function(e,t,r){}});
//# sourceMappingURL=app.08b5ebcd.js.map