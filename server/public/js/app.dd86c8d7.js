(function(e){function t(t){for(var a,c,l=t[0],u=t[1],i=t[2],d=0,b=[];d<l.length;d++)c=l[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&b.push(o[c][0]),o[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);s&&s(t);while(b.length)b.shift()();return r.push.apply(r,i||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,l=1;l<n.length;l++){var u=n[l];0!==o[u]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var s=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("a79d");var a=n("7a23");function o(e,t,n,o,r,c){const l=Object(a["u"])("router-view");return Object(a["n"])(),Object(a["c"])(Object(a["v"])(r.layout),null,{default:Object(a["D"])(()=>[Object(a["e"])(l,{layout:r.layout,"onUpdate:layout":t[1]||(t[1]=e=>r.layout=e)},null,8,["layout"])]),_:1})}var r={name:"App",data(){return{layout:"div"}}};n("bc43");r.render=o;var c=r,l=n("6c02"),u=(n("ddb0"),n("5502"));const i=()=>({counter:0}),s={counter:e=>e.counter},d={setCounter({commit:e},t){e("setCounter",t)},resetCounter({commit:e}){e("setCounter",{counter:0})},updateCounter({commit:e}){e("incrementCounter")}},b={setCounter(e,t){e.counter=t.counter},incrementCounter(e){e.counter++}};var O={namespaced:!0,state:i,getters:s,actions:d,mutations:b},j=n("bc3a"),p=n.n(j);p.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const g={timeout:3e4},h=async({url:e,config:t=g})=>{try{const n=await p.a.get(e,t);return{data:n.data,error:!1}}catch(n){return{data:n.response.data,error:!0}}},f=async({url:e,data:t,config:n=g})=>{try{const a=await p.a.post(e,t,n);return{data:a.data,error:!1}}catch(a){return{data:a.response.data,error:!0}}},m="/api/current_user",v="/auth/local",y=()=>h({url:""+m}),w=e=>f({url:""+v,data:e}),C=e=>({FETCH:e+"_FETCH",SUCCESS:e+"_SUCCESS",FAILURE:e+"_FAILURE",PENDING:e+"_PENDING"}),x=C("AUTH"),E="TOGGLE_LOADING",I={error:null,loading:!1},S={failed:e=>!!e.error,loading:e=>e.loading},_={[E](e,t){e.loading=t}},D=async(e,{cb:t,types:n})=>{try{e.commit(n.PENDING);const{data:a,error:o}=await t();e.commit(o?n.FAILURE:n.SUCCESS,a)}catch(a){e.commit(n.FAILURE,a)}},A={accountType:null,credits:null,googlePicture:null,loggedIn:!1,username:null},L={data:A,error:null,failed:!1,loaded:!1,loading:!1},z=()=>L,U={auth:e=>e.data,error:e=>e.error,failed:e=>e.failed,loaded:e=>e.loaded,loading:e=>e.loading,loggedIn:e=>e.data.loggedIn},k={fetch:e=>D(e,{cb:()=>y(),types:x})},F={[x.PENDING](e){e.loading=!0},[x.SUCCESS](e,t){const{googleId:n,id:a=null}=t||{},o=a?{...t,accountType:n?"google":"local",loggedIn:!0}:A;e.data=o,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[x.FAILURE](e,t){e.data=A,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var N={namespaced:!0,state:z,getters:U,actions:k,mutations:F};const T="/api/countries",P=()=>h({url:""+T}),B=()=>({...I}),G={...S},H={async fetch({commit:e}){e("load"),e("process",await P())}},R={..._,success(e,{data:t}){e.data=t,e.error=null},failure(e,{error:t}){e.error=t,e.data=null}};var q={namespaced:!0,state:B,getters:G,actions:H,mutations:R};const $={async init({dispatch:e}){await e("auth/fetch")}};var J=$;const M=!1,V=Object(u["b"])({plugins:[...M?[Object(u["a"])()]:[]],actions:J,modules:{test:O,auth:N,countries:q},strict:M});var W=V;function X(e,t,n,o,r,c){const l=Object(a["u"])("auth"),u=Object(a["u"])("country"),i=Object(a["u"])("layout");return Object(a["n"])(),Object(a["c"])(i,{name:"LayoutDefault"},{default:Object(a["D"])(()=>[Object(a["e"])("div",null,[Object(a["e"])(l),Object(a["e"])(u)])]),_:1})}var Y={name:"Layout",inheritAttrs:!1,props:{name:{type:String,default:"div",required:!0}},emits:["update:layout"],setup(e,{emit:t,slots:n}){return t("update:layout",e.name),()=>n.default()}};const Z={id:"auth"},K=Object(a["e"])("br",null,null,-1),Q=Object(a["e"])("br",null,null,-1),ee=Object(a["e"])("br",null,null,-1),te=Object(a["e"])("br",null,null,-1),ne=Object(a["e"])("br",null,null,-1),ae=Object(a["e"])("br",null,null,-1),oe=Object(a["e"])("br",null,null,-1);function re(e,t,n,o,r,c){return Object(a["n"])(),Object(a["c"])("div",Z,[Object(a["e"])("button",{onClick:t[1]||(t[1]=e=>o.fetchAuth())},"Fetch Auth"),K,Object(a["d"])(" Count: "+Object(a["x"])(o.count)+" ",1),Q,Object(a["d"])(" Has Data: "+Object(a["x"])(o.hasData)+" ",1),ee,Object(a["d"])(" Initialized: "+Object(a["x"])(o.initialized)+" ",1),te,Object(a["d"])(" Loading: "+Object(a["x"])(o.loading),1),ne,Object(a["d"])(" Reloading: "+Object(a["x"])(o.reloading)+" ",1),ae,Object(a["d"])(" In Error: "+Object(a["x"])(o.inError)+" ",1),oe,Object(a["E"])(Object(a["e"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(a["x"])(JSON.stringify(o.auth,null,4)),513),[[a["B"],o.auth]]),Object(a["E"])(Object(a["e"])("pre",null,"There was an error!",512),[[a["B"],o.inError]]),Object(a["E"])(Object(a["e"])("pre",null,"There were "+Object(a["x"])(o.count)+" records found!",513),[[a["B"],o.hasData]]),Object(a["E"])(Object(a["e"])("pre",null,"reloading...",512),[[a["B"],o.reloading]])])}var ce={name:"Auth",setup(){const e=Object(u["c"])();return{fetchAuth:()=>e.dispatch("auth/fetch"),count:Object(a["a"])(()=>e.getters["auth/count"]),auth:Object(a["a"])(()=>e.getters["auth/all"]),hasData:Object(a["a"])(()=>e.getters["auth/hasData"]),loading:Object(a["a"])(()=>e.getters["auth/loading"]),inError:Object(a["a"])(()=>e.getters["auth/inError"]),initialized:Object(a["a"])(()=>e.getters["auth/initialized"]),reloading:Object(a["a"])(()=>e.getters["auth/reloading"])}}};ce.render=re;var le=ce;const ue={id:"country"},ie=Object(a["e"])("br",null,null,-1),se=Object(a["e"])("br",null,null,-1),de=Object(a["e"])("br",null,null,-1),be=Object(a["e"])("br",null,null,-1),Oe=Object(a["e"])("br",null,null,-1),je=Object(a["e"])("br",null,null,-1),pe=Object(a["e"])("br",null,null,-1),ge=Object(a["e"])("br",null,null,-1),he=Object(a["e"])("br",null,null,-1),fe=Object(a["e"])("br",null,null,-1),me=Object(a["e"])("br",null,null,-1);function ve(e,t,n,o,r,c){return Object(a["n"])(),Object(a["c"])("div",ue,[Object(a["d"])(" Visibility: "+Object(a["x"])(o.visibility)+" ",1),ie,Object(a["e"])("button",{onClick:t[1]||(t[1]=e=>o.fetchCountries())},"Fetch Countries"),se,Object(a["e"])("button",{onClick:t[2]||(t[2]=Object(a["F"])(e=>o.visibility="merica",["prevent"]))},"America First!"),de,Object(a["d"])(" Total Count: "+Object(a["x"])(o.count)+" ",1),be,Object(a["d"])(" Filtered Count: "+Object(a["x"])(o.filteredCountries?o.filteredCountries.length:null)+" ",1),Oe,Object(a["d"])(" Has Data: "+Object(a["x"])(o.hasData)+" ",1),je,Object(a["d"])(" Initialized: "+Object(a["x"])(o.initialized)+" ",1),pe,Object(a["d"])(" Loading: "+Object(a["x"])(o.loading),1),ge,Object(a["d"])(" Reloading: "+Object(a["x"])(o.reloading)+" ",1),he,Object(a["d"])(" In Error: "+Object(a["x"])(o.inError)+" ",1),fe,Object(a["E"])(Object(a["e"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(a["x"])(JSON.stringify(o.filteredCountries,null,4)),513),[[a["B"],o.filteredCountries]]),Object(a["E"])(Object(a["e"])("pre",null,"There was an error!",512),[[a["B"],o.inError]]),Object(a["E"])(Object(a["e"])("pre",null,"There were "+Object(a["x"])(o.count)+" records found!",513),[[a["B"],o.hasData]]),Object(a["E"])(Object(a["e"])("pre",null,"reloading...",512),[[a["B"],o.reloading]]),Object(a["E"])(Object(a["e"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.countryCode=e),type:"text"},null,512),[[a["A"],o.countryCode]]),Object(a["e"])("button",{onClick:t[4]||(t[4]=e=>o.visibility="lookup")},"Search Countries"),me,Object(a["E"])(Object(a["e"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(a["x"])(JSON.stringify(o.lookupCountry,null,4)),513),[[a["B"],"lookup"===o.visibility]])])}const ye={all:e=>e,merica:e=>e.filter(e=>"US"===e.countryCode),lookup:(e,t)=>e.filter(e=>e.countryCode===t)};var we={name:"Country",setup(){const e=Object(a["s"])("all"),t=Object(a["s"])(""),n=Object(u["c"])(),o=Object(a["a"])(()=>n.state.countries.data),r=Object(a["a"])(()=>ye[e.value](o.value)),c=Object(a["a"])(()=>ye[e.value](o.value,t.value));return{fetchCountries:()=>n.dispatch("countries/fetch"),count:Object(a["a"])(()=>n.getters["countries/count"]),filteredCountries:r,lookupCountry:c,hasData:Object(a["a"])(()=>n.getters["countries/hasData"]),inError:Object(a["a"])(()=>n.getters["countries/inError"]),initialized:Object(a["a"])(()=>n.getters["countries/initialized"]),loading:Object(a["a"])(()=>n.getters["countries/loading"]),reloading:Object(a["a"])(()=>n.getters["countries/reloading"]),visibility:e,countryCode:t}}};we.render=ve;var Ce=we,xe={name:"ApiTester",components:{Auth:le,Country:Ce,Layout:Y}};xe.render=X;var Ee=xe;function Ie(e,t,n,o,r,c){const l=Object(a["u"])("layout");return Object(a["n"])(),Object(a["c"])(l,null,{default:Object(a["D"])(()=>[Object(a["t"])(e.$slots,"default")]),_:3})}var Se={name:"AuthSuccess",components:{Layout:Y},created(){window.document.body.style.display="none",window.opener&&(window.opener.open("/dashboard","_self"),window.opener.focus(),window.close())}};Se.render=Ie;var _e=Se;const De=Object(a["e"])("h1",null,"Welcome to the Dashboard",-1);function Ae(e,t,n,o,r,c){return Object(a["n"])(),Object(a["c"])("div",null,[De])}var Le={name:"Dashboard"};Le.render=Ae;var ze=Le;const Ue=Object(a["G"])("data-v-116c8dbb");Object(a["q"])("data-v-116c8dbb");const ke={class:"login"},Fe={class:"login__google-signin google-signin"},Ne=Object(a["e"])("span",{class:"google-signin__icon"},null,-1),Te=Object(a["e"])("span",{class:"google-signin__text"},"Login with Google",-1),Pe=Object(a["e"])("label",null,"Logged In",-1),Be=Object(a["e"])("br",null,null,-1),Ge=Object(a["e"])("a",{href:"/logout"},"Logout",-1),He={class:"form-input"},Re=Object(a["e"])("label",null,"Username:",-1),qe={class:"form-input"},$e=Object(a["e"])("label",null,"Password:",-1);Object(a["o"])();const Je=Ue((e,t,n,o,r,c)=>(Object(a["n"])(),Object(a["c"])("div",ke,[Object(a["e"])("div",Fe,[Object(a["e"])("div",{class:"google-signin__btn",onClick:t[1]||(t[1]=e=>o.popup("/auth/google","google_login",500,500))},[Ne,Te])]),Pe,Object(a["d"])(" "+Object(a["x"])(o.loggedIn),1),Be,Ge,Object(a["d"])(" "+Object(a["x"])(o.error&&!o.isDirty?o.error:"")+" ",1),Object(a["e"])("div",He,[Re,Object(a["E"])(Object(a["e"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.username=e),type:"text",name:"username"},null,512),[[a["A"],o.username]])]),Object(a["e"])("div",qe,[$e,Object(a["E"])(Object(a["e"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.password=e),type:"password",name:"password"},null,512),[[a["A"],o.password]])]),Object(a["e"])("button",{disabled:o.loading||!o.isDirty,onClick:t[4]||(t[4]=Object(a["F"])(e=>o.toggleLogin^=!0,["prevent"]))},Object(a["x"])(o.loading?"Loading...":"Login"),9,["disabled"])])));function Me({callback:e,immediate:t=!0,deps:n=[]}){const o=Object(a["r"])({data:null,error:null,executions:0,failed:!1,initialized:!1,loaded:!1,loading:!1});return Object(a["C"])(n,async()=>{o.loading=!0;const t=await e(),{data:n=null,error:a=null}=t;o.data=n,o.error=a,o.executions+=1,o.initialized=!!o.executions,n&&(o.loaded=!0,o.failed=!1),a&&(o.loaded=!1,o.failed=!0),o.loading=!1},{immediate:t}),{...Object(a["y"])(o)}}var Ve={name:"Login",setup(){const e=Object(u["c"])(),t=Object(l["c"])(),n=Object(a["a"])(()=>e.getters["auth/loggedIn"]),o=Object(a["s"])(""),r=Object(a["s"])(""),c=Object(a["s"])(0),i=Object(a["a"])(()=>!(!o.value&&!r.value)),s=(e,t,n,a,o=window)=>{const r=o.top.outerHeight/2+o.top.screenY-a/2,c=o.top.outerWidth/2+o.top.screenX-n/2,l=`rel=opener, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${n}, height=${a}, top=${r}, left=${c}`;o.open(e,t,l)},{data:d,error:b,failed:O,loading:j,loaded:p}=Me({callback:async()=>{const e=await w({username:o.value,password:r.value});return o.value="",r.value="",e},immediate:!1,deps:[c]});return Object(a["C"])(p,()=>p&&e.dispatch("auth/fetch")),e.watch(e=>e.auth.data.loggedIn,()=>{console.log("state watcher fired!"),t.push({name:"dashboard"})}),{results:d,error:b,failed:O,loaded:p,loading:j,username:o,password:r,toggleLogin:c,isDirty:i,loggedIn:n,popup:s}}};n("7ea9");Ve.render=Je,Ve.__scopeId="data-v-116c8dbb";var We=Ve;const Xe=Object(a["e"])("h1",null,"Not Found",-1);function Ye(e,t,n,o,r,c){return Object(a["n"])(),Object(a["c"])("div",null,[Xe])}var Ze={name:"NotFound"};Ze.render=Ye;var Ke=Ze;const Qe=W.dispatch("init"),et=Object(a["a"])(()=>W.getters["auth/loggedIn"]),tt=[{path:"/",name:"home",component:Ee,props:!1},{path:"/login",name:"login",component:We,meta:{guest:!0}},{path:"/dashboard",name:"dashboard",component:ze,props:!0,meta:{requiresAuth:!0}},{path:"/success",name:"success",component:_e,props:!0,meta:{}},{path:"/:catchAll(.*)",name:"notfound",component:Ke}],nt=Object(l["a"])({history:Object(l["b"])(),routes:tt});nt.beforeEach((e,t,n)=>{Qe.then(n).catch(e=>console.log("Unable to initialize store",e))}),nt.beforeEach((e,t,n)=>{e.matched.some(e=>e.meta.guest)?et.value?n({name:"dashboard"}):n():e.matched.some(e=>e.meta.requiresAuth)?et.value?n():n({name:"login"}):n()});var at=nt;const ot={class:"p-4"},rt={class:"app-header"},ct={class:"container"};function lt(e,t,n,o,r,c){const l=Object(a["u"])("app-nav");return Object(a["n"])(),Object(a["c"])("div",ot,[Object(a["e"])("header",rt,[Object(a["e"])(l)]),Object(a["e"])("main",ct,[Object(a["t"])(e.$slots,"default")])])}function ut(e,t,n,o,r,c){return Object(a["n"])(),Object(a["c"])("div",null,"I am nav!!!")}var it={name:"AppNav",setup(){return{}}};it.render=ut;var st=it,dt={name:"LayoutDefault",components:{AppNav:st}};dt.render=lt;var bt=dt;const Ot=[bt];var jt={install:(e,t)=>{Ot.forEach(t=>{e.component(t.name,t)})}};Object(a["b"])(c).use(W).use(at).use(jt).mount("#quizdini")},"7ea9":function(e,t,n){"use strict";n("cb02")},bc43:function(e,t,n){"use strict";n("f50f")},cb02:function(e,t,n){},f50f:function(e,t,n){}});
//# sourceMappingURL=app.dd86c8d7.js.map