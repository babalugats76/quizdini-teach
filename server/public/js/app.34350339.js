(function(e){function t(t){for(var a,c,s=t[0],u=t[1],i=t[2],d=0,b=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&b.push(n[c][0]),n[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(b.length)b.shift()();return o.push.apply(o,i||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,s=1;s<r.length;s++){var u=r[s];0!==n[u]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var a={},n={app:0},o=[];function c(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=a,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(r,a,function(t){return e[t]}.bind(null,a));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var l=u;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00ea":function(e,t,r){},"1d97":function(e,t,r){},"361e":function(e,t,r){"use strict";r("00ea")},"56d7":function(e,t,r){"use strict";r.r(t);r("a79d");var a=r("7a23");function n(e,t,r,n,o,c){const s=Object(a["z"])("router-view");return Object(a["r"])(),Object(a["d"])(Object(a["A"])(o.layout),null,{default:Object(a["I"])(()=>[Object(a["g"])(s,{layout:o.layout,"onUpdate:layout":t[1]||(t[1]=e=>o.layout=e)},null,8,["layout"])]),_:1})}var o={name:"App",data(){return{layout:"div"}}};r("bc43");o.render=n;var c=o,s=r("6c02");function u(e,t,r,n,o,c){const s=Object(a["z"])("country"),u=Object(a["z"])("layout");return Object(a["r"])(),Object(a["d"])(u,{name:"LayoutDefault"},{default:Object(a["I"])(()=>[Object(a["g"])("div",null,[Object(a["g"])(s)])]),_:1})}const i={id:"country"},l={class:"register-form"};function d(e,t,r,n,o,c){const s=Object(a["z"])("ui-datalist");return Object(a["r"])(),Object(a["d"])("div",i,[Object(a["g"])("form",l,[Object(a["g"])(s,{id:"countries",value:e.countrySearch,"onUpdate:value":t[1]||(t[1]=t=>e.countrySearch=t),options:e.countries,label:"Country",name:"country",onInput:t[2]||(t[2]=e=>n.onCountryChange(e))},null,8,["value","options"]),Object(a["g"])("span",null,Object(a["C"])(e.countryCode),1)])])}var b=r("5502"),p=r("506a");const m=e=>({FETCH:e+"_FETCH",SUCCESS:e+"_SUCCESS",FAILURE:e+"_FAILURE",PENDING:e+"_PENDING"}),O=m("AUTH"),j=m("COUNTRIES"),g=Object(a["L"])("data-v-cc4fa410");Object(a["u"])("data-v-cc4fa410");const y={id:"id"};Object(a["s"])();const v=g((e,t,r,n,o,c)=>{const s=Object(a["z"])("ui-error");return Object(a["r"])(),Object(a["d"])("label",null,[Object(a["f"])(Object(a["C"])(r.label)+" ",1),Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.input=e),list:"id",class:c.classes,name:r.name},null,10,["name"]),[[a["G"],n.input]]),Object(a["g"])("datalist",y,[(Object(a["r"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(r.options,e=>(Object(a["r"])(),Object(a["d"])("option",{key:e.key,"data-value":e.value},Object(a["C"])(e.text),9,["data-value"]))),128))]),r.errors?(Object(a["r"])(),Object(a["d"])(s,{key:0,errors:r.errors},null,8,["errors"])):Object(a["e"])("",!0)])}),f={key:0};function h(e,t,r,n,o,c){return Object(a["r"])(),Object(a["d"])("div",null,[(Object(a["r"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(r.errors,(e,t)=>(Object(a["r"])(),Object(a["d"])("ul",{key:t},[e?(Object(a["r"])(),Object(a["d"])("li",f,Object(a["C"])(e),1)):Object(a["e"])("",!0)]))),128))])}var _={name:"UiError",props:{errors:{type:Array,default:()=>[],required:!1}}};_.render=h;var C=_,w={name:"UiDatalist",components:{UiError:C},inheritAttr:!1,props:{errors:{type:[Array,String],default:"",required:!1},id:{type:String,required:!0},label:{type:String,default:"",required:!1},name:{type:String,required:!0},options:{type:[Array],required:!0},value:{type:String}},emits:["update:value"],setup(e,{emit:t}){const r=Object(a["b"])({get:()=>e.value,set:e=>t("update:value",e)});return{input:r}},computed:{classes(){return{"ui-datalist":!0}}}};r("ac80");w.render=v,w.__scopeId="data-v-cc4fa410";var S=w,E={name:"Country",components:{UiDatalist:S},setup(){const e=Object(b["c"])(),t=Object(a["v"])({countries:Object(a["b"])(()=>e.getters["countries/options"]),countryCode:"",countrySearch:"",loading:!1,isDirty:Object(a["b"])(()=>!(!t.username||!t.password)),errors:{},hasErrors:Object(a["b"])(()=>Object.keys(t.errors).some(e=>!!t.errors[e])),message:""}),r=()=>e.dispatch("countries/"+j.FETCH),n=Object(p["a"])({countryCode:Object(p["b"])().required()});function o(e){n.validateAt(e,{countryCode:t.countryCode}).then(()=>{t.errors[e]=""}).catch(r=>{t.errors[e]=r.errors})}Object(a["p"])(()=>{r()});const c=e=>{const r=Array.from(e.target.list.options).find(t=>t.innerHTML===e.target.value);t.countryCode=r?r.dataset["value"]:null,o("countryCode")};return{onCountryChange:c,...Object(a["D"])(t)}},methods:{getCountryCode:e=>{const t=Array.from(e.target.list.options).find(t=>t.innerHTML===e.target.value);if(t)return t.dataset["value"]}}};E.render=d;var I=E,U={name:"ApiTester",components:{Country:I}};U.render=u;var A=U;function L(e,t,r,n,o,c){const s=Object(a["z"])("layout");return Object(a["r"])(),Object(a["d"])(s,null,{default:Object(a["I"])(()=>[Object(a["y"])(e.$slots,"default")]),_:3})}var T={name:"AuthSuccess",created(){window.document.body.style.display="none",window.opener&&(window.opener.open("/dashboard","_self"),window.opener.focus(),window.close())}};T.render=L;var k=T;const F=Object(a["g"])("h1",null,"Welcome to the Dashboard",-1);function z(e,t,r,n,o,c){const s=Object(a["z"])("layout");return Object(a["r"])(),Object(a["d"])(s,{name:"LayoutDefault"},{default:Object(a["I"])(()=>[F]),_:1})}var D={name:"Dashboard"};D.render=z;var N=D;function P(e,t,r,n,o,c){const s=Object(a["z"])("LoginForm"),u=Object(a["z"])("layout");return Object(a["r"])(),Object(a["d"])(u,{name:"LayoutDefault"},{default:Object(a["I"])(()=>[Object(a["g"])(s)]),_:1})}r("ddb0");const q=Object(a["L"])("data-v-37a0b419");Object(a["u"])("data-v-37a0b419");const x={class:"login"},H={class:"login__google-signin google-signin"},$=Object(a["g"])("span",{class:"google-signin__icon"},null,-1),G=Object(a["g"])("span",{class:"google-signin__text"},"Login with Google",-1),R={key:0},M={class:"form-input"},J={class:"form-input"};Object(a["s"])();const V=q((e,t,r,n,o,c)=>{const s=Object(a["z"])("ui-input");return Object(a["r"])(),Object(a["d"])("div",x,[Object(a["g"])("div",H,[Object(a["g"])("div",{class:"google-signin__btn",onClick:t[1]||(t[1]=e=>n.popup("/auth/google","google_login",500,500))},[$,G])]),Object(a["g"])("form",{class:"login-form",onSubmit:t[6]||(t[6]=Object(a["K"])((...e)=>n.loginUser&&n.loginUser(...e),["prevent"]))},[e.errors&&!e.isDirty&&e.message?(Object(a["r"])(),Object(a["d"])("div",R,Object(a["C"])(e.message),1)):Object(a["e"])("",!0),Object(a["g"])("div",M,[Object(a["g"])(s,{value:e.username,"onUpdate:value":t[2]||(t[2]=t=>e.username=t),errors:e.errors["username"],label:"Username",name:"username",type:"text",tabindex:"1",onInput:t[3]||(t[3]=e=>n.validate("username"))},null,8,["value","errors"])]),Object(a["g"])("div",J,[Object(a["g"])(s,{value:e.password,"onUpdate:value":t[4]||(t[4]=t=>e.password=t),errors:e.errors["password"],label:"Password",name:"password",type:"password",tabindex:"2",onInput:t[5]||(t[5]=e=>n.validate("password"))},null,8,["value","errors"])]),Object(a["g"])("input",{type:"submit",value:"Login",disabled:!e.isDirty||e.hasErrors||e.loading,tabindex:"3"},null,8,["disabled"])],32)])});var W=r("bc3a"),B=r.n(W);B.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const K={timeout:3e4},Q=async({url:e,config:t=K})=>{try{const r=await B.a.get(e,t);return{data:r.data,error:!1}}catch(r){return{data:r.response.data,error:!0}}},X=async({url:e,data:t,config:r=K})=>{try{const a=await B.a.post(e,t,r);return{data:a.data,error:!1}}catch(a){return{data:a.response.data,error:!0}}},Y="/api/current_user",Z="/auth/local",ee=()=>Q({url:""+Y}),te=e=>X({url:""+Z,data:e});function re(e,t,r,n,o,c){const s=Object(a["z"])("ui-error");return Object(a["r"])(),Object(a["d"])("label",null,[Object(a["f"])(Object(a["C"])(r.label)+" ",1),Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.input=e),autocomplete:"autocomplete ? 'on' : null",class:c.classes,name:r.name,type:r.type},null,10,["name","type"]),[[a["F"],n.input]]),r.errors?(Object(a["r"])(),Object(a["d"])(s,{key:0,errors:r.errors},null,8,["errors"])):Object(a["e"])("",!0)])}var ae={name:"UiInput",components:{UiError:C},props:{autocomplete:{type:Boolean},errors:{type:[Array,String],default:"",required:!1},label:{type:String,default:"",required:!1},name:{type:String,required:!0},type:{type:String,default:"text",required:!0},value:{type:String}},emits:["update:value"],setup(e,{emit:t}){const r=Object(a["b"])({get:()=>e.value,set:e=>t("update:value",e)});return{input:r}},computed:{classes(){return{"ui-input":!0}}}};ae.render=re;var ne=ae,oe={name:"LoginForm",components:{UiInput:ne},setup(){const e=Object(b["c"])(),t=Object(s["c"])(),r=Object(a["v"])({username:"",password:"",loading:!1,isDirty:Object(a["b"])(()=>!(!r.username||!r.password)),errors:{},hasErrors:Object(a["b"])(()=>Object.keys(r.errors).some(e=>!!r.errors[e])),message:""}),n=Object(p["a"])({username:Object(p["b"])().required(),password:Object(p["b"])().required()});function o(e){n.validateAt(e,{username:r.username,password:r.password}).then(()=>{r.errors[e]=""}).catch(t=>{r.errors[e]=t.errors})}function c(){n.validate({username:r.username,password:r.password},{abortEarly:!1}).then(()=>(r.loading=!0,te({username:r.username,password:r.password}).then(e=>{const{error:t,data:a}=e||{};if(t)throw r.errors={},r.loading=!1,r.password="",r.username="",r.message=a.message,new Error("LoginFailed")}).then(()=>e.dispatch("auth/"+O.FETCH)).then(()=>t.push({name:"dashboard"})).catch(()=>{}))).catch(e=>{e.inner.forEach(e=>{r.errors[e.path]=e.errors})})}const u=(e,t,r,a,n=window)=>{const o=n.top.outerHeight/2+n.top.screenY-a/2,c=n.top.outerWidth/2+n.top.screenX-r/2,s=`rel=opener, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${a}, top=${o}, left=${c}`;n.open(e,t,s)};return{loginUser:c,popup:u,validate:o,...Object(a["D"])(r)}}};r("8b22");oe.render=V,oe.__scopeId="data-v-37a0b419";var ce=oe,se={name:"Login",components:{LoginForm:ce}};se.render=P;var ue=se;const ie=Object(a["g"])("h1",null,"Not Found",-1);function le(e,t,r,n,o,c){return Object(a["r"])(),Object(a["d"])("div",null,[ie])}var de={name:"NotFound"};de.render=le;var be=de;const pe=[{path:"/",name:"home",component:A,meta:{navItem:!0},props:!1},{path:"/login",name:"login",component:ue,meta:{navItem:!0,guest:!0}},{path:"/dashboard",name:"dashboard",component:N,meta:{navItem:!0,auth:!0},props:!0},{path:"/success",name:"success",component:k,meta:{navItem:!1},props:!0},{path:"/:catchAll(.*)",name:"notfound",component:be,meta:{navItem:!1}}];var me=pe;const Oe=()=>({counter:0}),je={counter:e=>e.counter},ge={setCounter({commit:e},t){e("setCounter",t)},resetCounter({commit:e}){e("setCounter",{counter:0})},updateCounter({commit:e}){e("incrementCounter")}},ye={setCounter(e,t){e.counter=t.counter},incrementCounter(e){e.counter++}};var ve={namespaced:!0,state:Oe,getters:je,actions:ge,mutations:ye};const fe=async(e,{cb:t,types:r})=>{try{e.commit(r.PENDING);const{data:a,error:n}=await t();e.commit(n?r.FAILURE:r.SUCCESS,a)}catch(a){e.commit(r.FAILURE,a)}},he={accountType:null,credits:null,googlePicture:null,authenticated:!1,username:null},_e={data:he,error:null,failed:!1,loaded:!1,loading:!1},Ce=()=>_e,we={accountType:e=>e.accountType,auth:e=>e.data,authenticated:e=>e.data.authenticated,credits:e=>e.data.credits,error:e=>e.error,failed:e=>e.failed,googlePicture:e=>e.googlePicture,loaded:e=>e.loaded,loading:e=>e.loading},Se={[O.FETCH]:e=>fe(e,{cb:()=>ee(),types:O})},Ee={[O.PENDING](e){e.loading=!0},[O.SUCCESS](e,t){const{googleId:r,id:a=null}=t||{},n=a?{...t,accountType:r?"google":"local",authenticated:!0}:he;e.data=n,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[O.FAILURE](e,t){e.data=he,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var Ie={namespaced:!0,state:Ce,getters:we,actions:Se,mutations:Ee};r("13d5");const Ue="/api/countries",Ae=()=>Q({url:""+Ue}),Le={data:[],error:null,failed:!1,loaded:!1,loading:!1},Te=()=>Le,ke={all:e=>e.data,options:e=>e.data.reduce((e,t)=>(e.push({key:t.countryId,value:t.countryCode,text:t.countryName}),e),[]),error:e=>e.error,failed:e=>e.failed,loaded:e=>e.loaded,loading:e=>e.loading},Fe={[j.FETCH]:e=>fe(e,{cb:()=>Ae(),types:j})},ze={[j.PENDING](e){e.loading=!0},[j.SUCCESS](e,t){e.data=t,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[j.FAILURE](e,t){e.data=null,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var De={namespaced:!0,state:Te,getters:ke,actions:Fe,mutations:ze};const Ne={async init({dispatch:e}){await e("auth/AUTH_FETCH")}};var Pe=Ne;const qe=!1,xe=Object(b["b"])({plugins:[...qe?[Object(b["a"])()]:[]],actions:Pe,modules:{test:ve,auth:Ie,countries:De},strict:qe});var He=xe;const $e=He.dispatch("init"),Ge=Object(a["b"])(()=>He.getters["auth/authenticated"]),Re=Object(s["a"])({history:Object(s["b"])(),routes:me});Re.beforeEach((e,t,r)=>{$e.then(r).catch(e=>console.log("Unable to initialize store",e))}),Re.beforeEach((e,t,r)=>{e.matched.some(e=>e.meta.guest)?Ge.value?r({name:"dashboard"}):r():e.matched.some(e=>e.meta.auth)?Ge.value?r():r({name:"login"}):r()});var Me=Re;function Je(e,t,r,n,o,c){return Object(a["y"])(e.$slots,"default")}var Ve={name:"Layout",inheritAttrs:!1,props:{name:{type:String,default:"div",required:!0}},emits:["update:layout"],created(){this.$emit("update:layout",this.name)}};Ve.render=Je;var We=Ve;const Be=Object(a["L"])("data-v-092b3d2c");Object(a["u"])("data-v-092b3d2c");const Ke={class:"app"},Qe={class:"app__header"},Xe={class:"app__main"},Ye=Object(a["g"])("footer",{class:"app__footer"},"© Quizdini 2013-21",-1);Object(a["s"])();const Ze=Be((e,t,r,n,o,c)=>{const s=Object(a["z"])("app-nav");return Object(a["r"])(),Object(a["d"])("div",Ke,[Object(a["g"])("header",Qe,[Object(a["g"])(s,{class:"app__nav"})]),Object(a["g"])("main",Xe,[Object(a["y"])(e.$slots,"default")]),Ye])}),et={class:"nav"},tt={key:0,class:"nav__item"},rt={key:1,href:"/logout",class:"nav__item",target:"_self"},at={key:2,class:"nav__item badge"},nt={key:3,class:"nav__item nav__item--lc"};function ot(e,t,r,n,o,c){const s=Object(a["z"])("NavItems");return Object(a["r"])(),Object(a["d"])("nav",et,[Object(a["g"])(s,{items:n.routes,authenticated:n.auth.authenticated},null,8,["items","authenticated"]),n.auth.authenticated&&n.auth.credits>=0?(Object(a["r"])(),Object(a["d"])("span",tt,"Credits: "+Object(a["C"])(n.auth.credits),1)):Object(a["e"])("",!0),n.auth.authenticated?(Object(a["r"])(),Object(a["d"])("a",rt,"logout")):Object(a["e"])("",!0),n.auth.authenticated&&"google"===n.auth.accountType?(Object(a["r"])(),Object(a["d"])("span",at,["google"===n.auth.accountType?(Object(a["r"])(),Object(a["d"])("img",{key:0,src:n.auth.googlePicture,class:"badge--google"},null,8,["src"])):Object(a["e"])("",!0)])):Object(a["e"])("",!0),n.auth.authenticated&&"local"===n.auth.accountType?(Object(a["r"])(),Object(a["d"])("span",nt,Object(a["C"])(n.auth.username),1)):Object(a["e"])("",!0)])}function ct(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(a["l"])(e)}const st=({items:e,authenticated:t})=>e.filter(e=>{const{meta:{navItem:r=!1,auth:a=!1,guest:n=!1}={}}=e;return!!r&&(t?a||!n:!a)}).map(e=>{const{name:t}=e;return Object(a["g"])(Object(a["z"])("router-link"),{class:"nav__item",to:{name:t},key:t},ct(t)?t:{default:()=>[t]})});var ut={name:"AppNav",components:{NavItems:st},setup(){const e=Object(b["c"])(),t=Object(a["b"])(()=>e.getters["auth/auth"]);return{auth:t,routes:me}}};r("cab4");ut.render=ot;var it=ut,lt={name:"LayoutDefault",components:{AppNav:it}};r("361e");lt.render=Ze,lt.__scopeId="data-v-092b3d2c";var dt=lt;const bt=[We,dt];var pt={install:(e,t)=>{bt.forEach(t=>{e.component(t.name,t)})}};Object(a["c"])(c).use(He).use(Me).use(pt).mount("#quizdini")},6423:function(e,t,r){},"8b22":function(e,t,r){"use strict";r("6423")},ac80:function(e,t,r){"use strict";r("1d97")},bc43:function(e,t,r){"use strict";r("f50f")},cab4:function(e,t,r){"use strict";r("e602")},e602:function(e,t,r){},f50f:function(e,t,r){}});
//# sourceMappingURL=app.34350339.js.map