(function(e){function t(t){for(var a,c,u=t[0],l=t[1],s=t[2],d=0,b=[];d<u.length;d++)c=u[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);i&&i(t);while(b.length)b.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,u=1;u<n.length;u++){var l=n[u];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},o=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var i=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00ea":function(e,t,n){},"361e":function(e,t,n){"use strict";n("00ea")},"56d7":function(e,t,n){"use strict";n.r(t);n("a79d");var a=n("7a23");function r(e,t,n,r,o,c){const u=Object(a["y"])("router-view");return Object(a["q"])(),Object(a["d"])(Object(a["z"])(o.layout),null,{default:Object(a["I"])(()=>[Object(a["g"])(u,{layout:o.layout,"onUpdate:layout":t[1]||(t[1]=e=>o.layout=e)},null,8,["layout"])]),_:1})}var o={name:"App",data(){return{layout:"div"}}};n("bc43");o.render=r;var c=o,u=n("6c02");function l(e,t,n,r,o,c){const u=Object(a["y"])("country"),l=Object(a["y"])("layout");return Object(a["q"])(),Object(a["d"])(l,{name:"LayoutDefault"},{default:Object(a["I"])(()=>[Object(a["g"])("div",null,[Object(a["g"])(u)])]),_:1})}const s={id:"country"},i=Object(a["g"])("br",null,null,-1),d=Object(a["g"])("br",null,null,-1),b=Object(a["g"])("br",null,null,-1),p=Object(a["g"])("br",null,null,-1),O={key:0},j=Object(a["g"])("br",null,null,-1),g=Object(a["g"])("br",null,null,-1),m=Object(a["g"])("br",null,null,-1),f=Object(a["g"])("br",null,null,-1),y=Object(a["g"])("br",null,null,-1);function v(e,t,n,r,o,c){return Object(a["q"])(),Object(a["d"])("div",s,[Object(a["f"])(" Visibility: "+Object(a["B"])(r.visibility)+" ",1),i,Object(a["g"])("button",{onClick:t[1]||(t[1]=e=>r.fetchCountries())},"Fetch Countries"),d,Object(a["g"])("button",{onClick:t[2]||(t[2]=Object(a["K"])(e=>r.visibility="all",["prevent"]))},"All Countries"),b,Object(a["g"])("button",{onClick:t[3]||(t[3]=Object(a["K"])(e=>r.visibility="merica",["prevent"]))},"America First!"),p,r.loaded?(Object(a["q"])(),Object(a["d"])("span",O,"Filtered Count: "+Object(a["B"])(r.filteredCountries?r.filteredCountries.length:null),1)):Object(a["e"])("",!0),j,Object(a["f"])(" loaded: "+Object(a["B"])(r.loaded),1),g,Object(a["f"])(" loading: "+Object(a["B"])(r.loading)+" ",1),m,Object(a["f"])(" failed: "+Object(a["B"])(r.failed)+" ",1),f,Object(a["J"])(Object(a["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(a["B"])(JSON.stringify(r.filteredCountries,null,4)),513),[[a["G"],r.loaded]]),Object(a["J"])(Object(a["g"])("pre",null,"There was an error!",512),[[a["G"],r.failed]]),Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.countryCode=e),type:"text"},null,512),[[a["F"],r.countryCode]]),Object(a["g"])("button",{onClick:t[5]||(t[5]=e=>r.visibility="lookup")},"Search Countries"),y,Object(a["J"])(Object(a["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(a["B"])(JSON.stringify(r.lookupCountry,null,4)),513),[[a["G"],"lookup"===r.visibility]])])}var h=n("5502");const w=e=>({FETCH:e+"_FETCH",SUCCESS:e+"_SUCCESS",FAILURE:e+"_FAILURE",PENDING:e+"_PENDING"}),C=w("AUTH"),_=w("COUNTRIES"),S={all:e=>e,merica:e=>e.filter(e=>"US"===e.countryCode),lookup:(e,t)=>e.filter(e=>e.countryCode===t)};var E={name:"Country",setup(){const e=Object(a["v"])("all"),t=Object(a["v"])(""),n=Object(h["c"])(),r=Object(a["b"])(()=>n.getters["countries/all"]),o=Object(a["b"])(()=>S[e.value](r.value)),c=Object(a["b"])(()=>S[e.value](r.value,t.value));return{fetchCountries:()=>n.dispatch("countries/"+_.FETCH),filteredCountries:o,lookupCountry:c,loaded:Object(a["b"])(()=>n.getters["countries/loaded"]),failed:Object(a["b"])(()=>n.getters["countries/failed"]),loading:Object(a["b"])(()=>n.getters["countries/loading"]),visibility:e,countryCode:t}}};E.render=v;var q=E,I={name:"ApiTester",components:{Country:q}};I.render=l;var U=I;function k(e,t,n,r,o,c){const u=Object(a["y"])("layout");return Object(a["q"])(),Object(a["d"])(u,null,{default:Object(a["I"])(()=>[Object(a["x"])(e.$slots,"default")]),_:3})}var F={name:"AuthSuccess",created(){window.document.body.style.display="none",window.opener&&(window.opener.open("/dashboard","_self"),window.opener.focus(),window.close())}};F.render=k;var x=F;const T=Object(a["g"])("h1",null,"Welcome to the Dashboard",-1);function A(e,t,n,r,o,c){const u=Object(a["y"])("layout");return Object(a["q"])(),Object(a["d"])(u,{name:"LayoutDefault"},{default:Object(a["I"])(()=>[T]),_:1})}var L={name:"Dashboard"};L.render=A;var N=L;function P(e,t,n,r,o,c){const u=Object(a["y"])("LoginForm"),l=Object(a["y"])("layout");return Object(a["q"])(),Object(a["d"])(l,{name:"LayoutDefault"},{default:Object(a["I"])(()=>[Object(a["g"])(u)]),_:1})}n("ddb0");const D=Object(a["L"])("data-v-37a0b419");Object(a["t"])("data-v-37a0b419");const B={class:"login"},H={class:"login__google-signin google-signin"},z=Object(a["g"])("span",{class:"google-signin__icon"},null,-1),G=Object(a["g"])("span",{class:"google-signin__text"},"Login with Google",-1),J={key:0},$={class:"form-input"},R={class:"form-input"};Object(a["r"])();const M=D((e,t,n,r,o,c)=>{const u=Object(a["y"])("ui-input");return Object(a["q"])(),Object(a["d"])("div",B,[Object(a["g"])("div",H,[Object(a["g"])("div",{class:"google-signin__btn",onClick:t[1]||(t[1]=e=>r.popup("/auth/google","google_login",500,500))},[z,G])]),Object(a["g"])("form",{class:"login-form",onSubmit:t[6]||(t[6]=Object(a["K"])((...e)=>r.loginUser&&r.loginUser(...e),["prevent"]))},[e.errors&&!e.isDirty&&e.message?(Object(a["q"])(),Object(a["d"])("div",J,Object(a["B"])(e.message),1)):Object(a["e"])("",!0),Object(a["g"])("div",$,[Object(a["g"])(u,{value:e.username,"onUpdate:value":t[2]||(t[2]=t=>e.username=t),errors:e.errors["username"],label:"Username",name:"username",type:"text",tabindex:"1",onInput:t[3]||(t[3]=e=>r.validate("username"))},null,8,["value","errors"])]),Object(a["g"])("div",R,[Object(a["g"])(u,{value:e.password,"onUpdate:value":t[4]||(t[4]=t=>e.password=t),errors:e.errors["password"],label:"Password",name:"password",type:"password",tabindex:"2",onInput:t[5]||(t[5]=e=>r.validate("password"))},null,8,["value","errors"])]),Object(a["g"])("input",{type:"submit",value:"Login",disabled:!e.isDirty||e.hasErrors||e.loading,tabindex:"3"},null,8,["disabled"])],32)])});var K=n("506a"),V=n("bc3a"),W=n.n(V);W.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const Q={timeout:3e4},X=async({url:e,config:t=Q})=>{try{const n=await W.a.get(e,t);return{data:n.data,error:!1}}catch(n){return{data:n.response.data,error:!0}}},Y=async({url:e,data:t,config:n=Q})=>{try{const a=await W.a.post(e,t,n);return{data:a.data,error:!1}}catch(a){return{data:a.response.data,error:!0}}},Z="/api/current_user",ee="/auth/local",te=()=>X({url:""+Z}),ne=e=>Y({url:""+ee,data:e});function ae(e,t,n,r,o,c){const u=Object(a["y"])("ui-error");return Object(a["q"])(),Object(a["d"])("label",null,[Object(a["f"])(Object(a["B"])(n.label)+" ",1),Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.input=e),autocomplete:"autocomplete ? 'on' : null",class:c.classes,name:n.name,type:n.type},null,10,["name","type"]),[[a["E"],r.input]]),n.errors?(Object(a["q"])(),Object(a["d"])(u,{key:0,errors:n.errors},null,8,["errors"])):Object(a["e"])("",!0)])}const re={key:0};function oe(e,t,n,r,o,c){return Object(a["q"])(),Object(a["d"])("div",null,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(n.errors,(e,t)=>(Object(a["q"])(),Object(a["d"])("ul",{key:t},[e?(Object(a["q"])(),Object(a["d"])("li",re,Object(a["B"])(e),1)):Object(a["e"])("",!0)]))),128))])}var ce={name:"UiError",props:{errors:{type:Array,default:()=>[],required:!1}}};ce.render=oe;var ue=ce,le={name:"UiInput",components:{UiError:ue},props:{autocomplete:{type:Boolean},errors:{type:[Array,String],default:"",required:!1},label:{type:String,default:"",required:!1},name:{type:String,required:!0},type:{type:String,default:"text",required:!0},value:{type:String}},emits:["update:value"],setup(e,{emit:t}){const n=Object(a["b"])({get:()=>e.value,set:e=>t("update:value",e)});return{input:n}},computed:{classes(){return{"ui-input":!0}}}};le.render=ae;var se=le,ie={name:"LoginForm",components:{UiInput:se},setup(){const e=Object(h["c"])(),t=Object(u["c"])(),n=Object(a["u"])({username:"",password:"",loading:!1,isDirty:Object(a["b"])(()=>!(!n.username||!n.password)),errors:{},hasErrors:Object(a["b"])(()=>Object.keys(n.errors).some(e=>!!n.errors[e])),message:""}),r=Object(K["a"])({username:Object(K["b"])().required(),password:Object(K["b"])().required()});function o(e){r.validateAt(e,{username:n.username,password:n.password}).then(()=>{n.errors[e]=""}).catch(t=>{n.errors[e]=t.errors})}function c(){r.validate({username:n.username,password:n.password},{abortEarly:!1}).then(()=>(n.loading=!0,ne({username:n.username,password:n.password}).then(e=>{const{error:t,data:a}=e||{};if(t)throw n.errors={},n.loading=!1,n.password="",n.username="",n.message=a.message,new Error("LoginFailed")}).then(()=>e.dispatch("auth/"+C.FETCH)).then(()=>t.push({name:"dashboard"})).catch(()=>{}))).catch(e=>{e.inner.forEach(e=>{n.errors[e.path]=e.errors})})}const l=(e,t,n,a,r=window)=>{const o=r.top.outerHeight/2+r.top.screenY-a/2,c=r.top.outerWidth/2+r.top.screenX-n/2,u=`rel=opener, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${n}, height=${a}, top=${o}, left=${c}`;r.open(e,t,u)};return{loginUser:c,popup:l,validate:o,...Object(a["C"])(n)}}};n("8b22");ie.render=M,ie.__scopeId="data-v-37a0b419";var de=ie,be={name:"Login",components:{LoginForm:de}};be.render=P;var pe=be;const Oe=Object(a["g"])("h1",null,"Not Found",-1);function je(e,t,n,r,o,c){return Object(a["q"])(),Object(a["d"])("div",null,[Oe])}var ge={name:"NotFound"};ge.render=je;var me=ge;const fe=[{path:"/",name:"home",component:U,meta:{navItem:!0},props:!1},{path:"/login",name:"login",component:pe,meta:{navItem:!0,guest:!0}},{path:"/dashboard",name:"dashboard",component:N,meta:{navItem:!0,auth:!0},props:!0},{path:"/success",name:"success",component:x,meta:{navItem:!1},props:!0},{path:"/:catchAll(.*)",name:"notfound",component:me,meta:{navItem:!1}}];var ye=fe;const ve=()=>({counter:0}),he={counter:e=>e.counter},we={setCounter({commit:e},t){e("setCounter",t)},resetCounter({commit:e}){e("setCounter",{counter:0})},updateCounter({commit:e}){e("incrementCounter")}},Ce={setCounter(e,t){e.counter=t.counter},incrementCounter(e){e.counter++}};var _e={namespaced:!0,state:ve,getters:he,actions:we,mutations:Ce};const Se=async(e,{cb:t,types:n})=>{try{e.commit(n.PENDING);const{data:a,error:r}=await t();e.commit(r?n.FAILURE:n.SUCCESS,a)}catch(a){e.commit(n.FAILURE,a)}},Ee={accountType:null,credits:null,googlePicture:null,authenticated:!1,username:null},qe={data:Ee,error:null,failed:!1,loaded:!1,loading:!1},Ie=()=>qe,Ue={accountType:e=>e.accountType,auth:e=>e.data,authenticated:e=>e.data.authenticated,credits:e=>e.data.credits,error:e=>e.error,failed:e=>e.failed,googlePicture:e=>e.googlePicture,loaded:e=>e.loaded,loading:e=>e.loading},ke={[C.FETCH]:e=>Se(e,{cb:()=>te(),types:C})},Fe={[C.PENDING](e){e.loading=!0},[C.SUCCESS](e,t){const{googleId:n,id:a=null}=t||{},r=a?{...t,accountType:n?"google":"local",authenticated:!0}:Ee;e.data=r,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[C.FAILURE](e,t){e.data=Ee,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var xe={namespaced:!0,state:Ie,getters:Ue,actions:ke,mutations:Fe};const Te="/api/countries",Ae=()=>X({url:""+Te}),Le={data:null,error:null,failed:!1,loaded:!1,loading:!1},Ne=()=>Le,Pe={all:e=>e.data,error:e=>e.error,failed:e=>e.failed,loaded:e=>e.loaded,loading:e=>e.loading},De={[_.FETCH]:e=>Se(e,{cb:()=>Ae(),types:_})},Be={[_.PENDING](e){e.loading=!0},[_.SUCCESS](e,t){e.data=t,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[_.FAILURE](e,t){e.data=null,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var He={namespaced:!0,state:Ne,getters:Pe,actions:De,mutations:Be};const ze={async init({dispatch:e}){await e("auth/AUTH_FETCH")}};var Ge=ze;const Je=!1,$e=Object(h["b"])({plugins:[...Je?[Object(h["a"])()]:[]],actions:Ge,modules:{test:_e,auth:xe,countries:He},strict:Je});var Re=$e;const Me=Re.dispatch("init"),Ke=Object(a["b"])(()=>Re.getters["auth/authenticated"]),Ve=Object(u["a"])({history:Object(u["b"])(),routes:ye});Ve.beforeEach((e,t,n)=>{Me.then(n).catch(e=>console.log("Unable to initialize store",e))}),Ve.beforeEach((e,t,n)=>{e.matched.some(e=>e.meta.guest)?Ke.value?n({name:"dashboard"}):n():e.matched.some(e=>e.meta.auth)?Ke.value?n():n({name:"login"}):n()});var We=Ve;function Qe(e,t,n,r,o,c){return Object(a["x"])(e.$slots,"default")}var Xe={name:"Layout",inheritAttrs:!1,props:{name:{type:String,default:"div",required:!0}},emits:["update:layout"],created(){this.$emit("update:layout",this.name)}};Xe.render=Qe;var Ye=Xe;const Ze=Object(a["L"])("data-v-092b3d2c");Object(a["t"])("data-v-092b3d2c");const et={class:"app"},tt={class:"app__header"},nt={class:"app__main"},at=Object(a["g"])("footer",{class:"app__footer"},"© Quizdini 2013-21",-1);Object(a["r"])();const rt=Ze((e,t,n,r,o,c)=>{const u=Object(a["y"])("app-nav");return Object(a["q"])(),Object(a["d"])("div",et,[Object(a["g"])("header",tt,[Object(a["g"])(u,{class:"app__nav"})]),Object(a["g"])("main",nt,[Object(a["x"])(e.$slots,"default")]),at])}),ot={class:"nav"},ct={key:0,class:"nav__item"},ut={key:1,href:"/logout",class:"nav__item",target:"_self"},lt={key:2,class:"nav__item badge"},st={key:3,class:"nav__item nav__item--lc"};function it(e,t,n,r,o,c){const u=Object(a["y"])("NavItems");return Object(a["q"])(),Object(a["d"])("nav",ot,[Object(a["g"])(u,{items:r.routes,authenticated:r.auth.authenticated},null,8,["items","authenticated"]),r.auth.authenticated&&r.auth.credits>=0?(Object(a["q"])(),Object(a["d"])("span",ct,"Credits: "+Object(a["B"])(r.auth.credits),1)):Object(a["e"])("",!0),r.auth.authenticated?(Object(a["q"])(),Object(a["d"])("a",ut,"logout")):Object(a["e"])("",!0),r.auth.authenticated&&"google"===r.auth.accountType?(Object(a["q"])(),Object(a["d"])("span",lt,["google"===r.auth.accountType?(Object(a["q"])(),Object(a["d"])("img",{key:0,src:r.auth.googlePicture,class:"badge--google"},null,8,["src"])):Object(a["e"])("",!0)])):Object(a["e"])("",!0),r.auth.authenticated&&"local"===r.auth.accountType?(Object(a["q"])(),Object(a["d"])("span",st,Object(a["B"])(r.auth.username),1)):Object(a["e"])("",!0)])}function dt(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(a["l"])(e)}const bt=({items:e,authenticated:t})=>e.filter(e=>{const{meta:{navItem:n=!1,auth:a=!1,guest:r=!1}={}}=e;return!!n&&(t?a||!r:!a)}).map(e=>{const{name:t}=e;return Object(a["g"])(Object(a["y"])("router-link"),{class:"nav__item",to:{name:t},key:t},dt(t)?t:{default:()=>[t]})});var pt={name:"AppNav",components:{NavItems:bt},setup(){const e=Object(h["c"])(),t=Object(a["b"])(()=>e.getters["auth/auth"]);return{auth:t,routes:ye}}};n("cab4");pt.render=it;var Ot=pt,jt={name:"LayoutDefault",components:{AppNav:Ot}};n("361e");jt.render=rt,jt.__scopeId="data-v-092b3d2c";var gt=jt;const mt=[Ye,gt];var ft={install:(e,t)=>{mt.forEach(t=>{e.component(t.name,t)})}};Object(a["c"])(c).use(Re).use(We).use(ft).mount("#quizdini")},6423:function(e,t,n){},"8b22":function(e,t,n){"use strict";n("6423")},bc43:function(e,t,n){"use strict";n("f50f")},cab4:function(e,t,n){"use strict";n("e602")},e602:function(e,t,n){},f50f:function(e,t,n){}});
//# sourceMappingURL=app.eab3ea7b.js.map