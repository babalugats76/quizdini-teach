(function(e){function t(t){for(var r,c,u=t[0],l=t[1],s=t[2],b=0,d=[];b<u.length;b++)c=u[b],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);i&&i(t);while(d.length)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,u=1;u<n.length;u++){var l=n[u];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var i=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00ea":function(e,t,n){},"361e":function(e,t,n){"use strict";n("00ea")},"532d":function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("a79d");var r=n("7a23");function a(e,t,n,a,o,c){const u=Object(r["y"])("router-view");return Object(r["q"])(),Object(r["d"])(Object(r["z"])(o.layout),null,{default:Object(r["I"])(()=>[Object(r["g"])(u,{layout:o.layout,"onUpdate:layout":t[1]||(t[1]=e=>o.layout=e)},null,8,["layout"])]),_:1})}var o={name:"App",data(){return{layout:"div"}}};n("bc43");o.render=a;var c=o,u=n("6c02");function l(e,t,n,a,o,c){const u=Object(r["y"])("auth"),l=Object(r["y"])("country"),s=Object(r["y"])("layout");return Object(r["q"])(),Object(r["d"])(s,{name:"LayoutDefault"},{default:Object(r["I"])(()=>[Object(r["g"])("div",null,[Object(r["g"])(u),Object(r["g"])(l)])]),_:1})}const s={id:"auth"},i=Object(r["g"])("br",null,null,-1),b=Object(r["g"])("br",null,null,-1),d=Object(r["g"])("br",null,null,-1),O=Object(r["g"])("br",null,null,-1),j=Object(r["g"])("br",null,null,-1),p=Object(r["g"])("br",null,null,-1),g=Object(r["g"])("br",null,null,-1);function m(e,t,n,a,o,c){return Object(r["q"])(),Object(r["d"])("div",s,[Object(r["g"])("button",{onClick:t[1]||(t[1]=e=>a.fetchAuth())},"Fetch Auth"),i,Object(r["f"])(" Count: "+Object(r["B"])(a.count)+" ",1),b,Object(r["f"])(" Has Data: "+Object(r["B"])(a.hasData)+" ",1),d,Object(r["f"])(" Initialized: "+Object(r["B"])(a.initialized)+" ",1),O,Object(r["f"])(" Loading: "+Object(r["B"])(a.loading),1),j,Object(r["f"])(" Reloading: "+Object(r["B"])(a.reloading)+" ",1),p,Object(r["f"])(" In Error: "+Object(r["B"])(a.inError)+" ",1),g,Object(r["J"])(Object(r["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(r["B"])(JSON.stringify(a.auth,null,4)),513),[[r["G"],a.auth]]),Object(r["J"])(Object(r["g"])("pre",null,"There was an error!",512),[[r["G"],a.inError]]),Object(r["J"])(Object(r["g"])("pre",null,"There were "+Object(r["B"])(a.count)+" records found!",513),[[r["G"],a.hasData]]),Object(r["J"])(Object(r["g"])("pre",null,"reloading...",512),[[r["G"],a.reloading]])])}var h=n("5502"),f={name:"Auth",setup(){const e=Object(h["c"])();return{fetchAuth:()=>e.dispatch("auth/fetch"),count:Object(r["b"])(()=>e.getters["auth/count"]),auth:Object(r["b"])(()=>e.getters["auth/all"]),hasData:Object(r["b"])(()=>e.getters["auth/hasData"]),loading:Object(r["b"])(()=>e.getters["auth/loading"]),inError:Object(r["b"])(()=>e.getters["auth/inError"]),initialized:Object(r["b"])(()=>e.getters["auth/initialized"]),reloading:Object(r["b"])(()=>e.getters["auth/reloading"])}}};f.render=m;var v=f;const y={id:"country"},w=Object(r["g"])("br",null,null,-1),_=Object(r["g"])("br",null,null,-1),C=Object(r["g"])("br",null,null,-1),E=Object(r["g"])("br",null,null,-1),I=Object(r["g"])("br",null,null,-1),S=Object(r["g"])("br",null,null,-1),q=Object(r["g"])("br",null,null,-1),U=Object(r["g"])("br",null,null,-1),k=Object(r["g"])("br",null,null,-1),x=Object(r["g"])("br",null,null,-1),B=Object(r["g"])("br",null,null,-1);function D(e,t,n,a,o,c){return Object(r["q"])(),Object(r["d"])("div",y,[Object(r["f"])(" Visibility: "+Object(r["B"])(a.visibility)+" ",1),w,Object(r["g"])("button",{onClick:t[1]||(t[1]=e=>a.fetchCountries())},"Fetch Countries"),_,Object(r["g"])("button",{onClick:t[2]||(t[2]=Object(r["K"])(e=>a.visibility="merica",["prevent"]))},"America First!"),C,Object(r["f"])(" Total Count: "+Object(r["B"])(a.count)+" ",1),E,Object(r["f"])(" Filtered Count: "+Object(r["B"])(a.filteredCountries?a.filteredCountries.length:null)+" ",1),I,Object(r["f"])(" Has Data: "+Object(r["B"])(a.hasData)+" ",1),S,Object(r["f"])(" Initialized: "+Object(r["B"])(a.initialized)+" ",1),q,Object(r["f"])(" Loading: "+Object(r["B"])(a.loading),1),U,Object(r["f"])(" Reloading: "+Object(r["B"])(a.reloading)+" ",1),k,Object(r["f"])(" In Error: "+Object(r["B"])(a.inError)+" ",1),x,Object(r["J"])(Object(r["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(r["B"])(JSON.stringify(a.filteredCountries,null,4)),513),[[r["G"],a.filteredCountries]]),Object(r["J"])(Object(r["g"])("pre",null,"There was an error!",512),[[r["G"],a.inError]]),Object(r["J"])(Object(r["g"])("pre",null,"There were "+Object(r["B"])(a.count)+" records found!",513),[[r["G"],a.hasData]]),Object(r["J"])(Object(r["g"])("pre",null,"reloading...",512),[[r["G"],a.reloading]]),Object(r["J"])(Object(r["g"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.countryCode=e),type:"text"},null,512),[[r["F"],a.countryCode]]),Object(r["g"])("button",{onClick:t[4]||(t[4]=e=>a.visibility="lookup")},"Search Countries"),B,Object(r["J"])(Object(r["g"])("pre",{style:{fontSize:"10px",maxHeight:"200px",overflow:"scroll"}},Object(r["B"])(JSON.stringify(a.lookupCountry,null,4)),513),[[r["G"],"lookup"===a.visibility]])])}const A={all:e=>e,merica:e=>e.filter(e=>"US"===e.countryCode),lookup:(e,t)=>e.filter(e=>e.countryCode===t)};var F={name:"Country",setup(){const e=Object(r["v"])("all"),t=Object(r["v"])(""),n=Object(h["c"])(),a=Object(r["b"])(()=>n.state.countries.data),o=Object(r["b"])(()=>A[e.value](a.value)),c=Object(r["b"])(()=>A[e.value](a.value,t.value));return{fetchCountries:()=>n.dispatch("countries/fetch"),count:Object(r["b"])(()=>n.getters["countries/count"]),filteredCountries:o,lookupCountry:c,hasData:Object(r["b"])(()=>n.getters["countries/hasData"]),inError:Object(r["b"])(()=>n.getters["countries/inError"]),initialized:Object(r["b"])(()=>n.getters["countries/initialized"]),loading:Object(r["b"])(()=>n.getters["countries/loading"]),reloading:Object(r["b"])(()=>n.getters["countries/reloading"]),visibility:e,countryCode:t}}};F.render=D;var L=F,T={name:"ApiTester",components:{Auth:v,Country:L}};T.render=l;var z=T;function N(e,t,n,a,o,c){const u=Object(r["y"])("layout");return Object(r["q"])(),Object(r["d"])(u,null,{default:Object(r["I"])(()=>[Object(r["x"])(e.$slots,"default")]),_:3})}var J={name:"AuthSuccess",created(){window.document.body.style.display="none",window.opener&&(window.opener.open("/dashboard","_self"),window.opener.focus(),window.close())}};J.render=N;var G=J;const P=Object(r["g"])("h1",null,"Welcome to the Dashboard",-1);function H(e,t,n,a,o,c){const u=Object(r["y"])("layout");return Object(r["q"])(),Object(r["d"])(u,{name:"LayoutDefault"},{default:Object(r["I"])(()=>[P]),_:1})}var $={name:"Dashboard"};$.render=H;var R=$;function M(e,t,n,a,o,c){const u=Object(r["y"])("LoginForm"),l=Object(r["y"])("layout");return Object(r["q"])(),Object(r["d"])(l,{name:"LayoutDefault"},{default:Object(r["I"])(()=>[Object(r["g"])(u)]),_:1})}n("ddb0");const V=Object(r["L"])("data-v-37a0b419");Object(r["t"])("data-v-37a0b419");const K={class:"login"},W={class:"login__google-signin google-signin"},Q=Object(r["g"])("span",{class:"google-signin__icon"},null,-1),X=Object(r["g"])("span",{class:"google-signin__text"},"Login with Google",-1),Y={key:0},Z={class:"form-input"},ee={class:"form-input"};Object(r["r"])();const te=V((e,t,n,a,o,c)=>{const u=Object(r["y"])("ui-input");return Object(r["q"])(),Object(r["d"])("div",K,[Object(r["g"])("div",W,[Object(r["g"])("div",{class:"google-signin__btn",onClick:t[1]||(t[1]=e=>a.popup("/auth/google","google_login",500,500))},[Q,X])]),Object(r["g"])("form",{class:"login-form",onSubmit:t[6]||(t[6]=Object(r["K"])((...e)=>a.loginUser&&a.loginUser(...e),["prevent"]))},[e.errors&&!e.isDirty&&e.message?(Object(r["q"])(),Object(r["d"])("div",Y,Object(r["B"])(e.message),1)):Object(r["e"])("",!0),Object(r["g"])("div",Z,[Object(r["g"])(u,{value:e.username,"onUpdate:value":t[2]||(t[2]=t=>e.username=t),errors:e.errors["username"],label:"Username",name:"username",type:"text",tabindex:"1",onInput:t[3]||(t[3]=e=>a.validate("username"))},null,8,["value","errors"])]),Object(r["g"])("div",ee,[Object(r["g"])(u,{value:e.password,"onUpdate:value":t[4]||(t[4]=t=>e.password=t),errors:e.errors["password"],label:"Password",name:"password",type:"password",tabindex:"2",onInput:t[5]||(t[5]=e=>a.validate("password"))},null,8,["value","errors"])]),Object(r["g"])("input",{type:"submit",value:"Login",disabled:!e.isDirty||e.hasErrors||e.loading,tabindex:"3"},null,8,["disabled"])],32)])});var ne=n("506a"),re=n("bc3a"),ae=n.n(re);ae.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const oe={timeout:3e4},ce=async({url:e,config:t=oe})=>{try{const n=await ae.a.get(e,t);return{data:n.data,error:!1}}catch(n){return{data:n.response.data,error:!0}}},ue=async({url:e,data:t,config:n=oe})=>{try{const r=await ae.a.post(e,t,n);return{data:r.data,error:!1}}catch(r){return{data:r.response.data,error:!0}}},le="/api/current_user",se="/auth/local",ie=()=>ce({url:""+le}),be=e=>ue({url:""+se,data:e});function de(e,t,n,a,o,c){const u=Object(r["y"])("ui-error");return Object(r["q"])(),Object(r["d"])("label",null,[Object(r["f"])(Object(r["B"])(n.label)+" ",1),Object(r["J"])(Object(r["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.input=e),autocomplete:"autocomplete ? 'on' : null",class:c.classes,name:n.name,type:n.type},null,10,["name","type"]),[[r["E"],a.input]]),n.errors?(Object(r["q"])(),Object(r["d"])(u,{key:0,errors:n.errors},null,8,["errors"])):Object(r["e"])("",!0)])}const Oe={key:0};function je(e,t,n,a,o,c){return Object(r["q"])(),Object(r["d"])("div",null,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(n.errors,(e,t)=>(Object(r["q"])(),Object(r["d"])("ul",{key:t},[e?(Object(r["q"])(),Object(r["d"])("li",Oe,Object(r["B"])(e),1)):Object(r["e"])("",!0)]))),128))])}var pe={name:"UiError",props:{errors:{type:Array,default:()=>[],required:!1}}};pe.render=je;var ge=pe,me={name:"UiInput",components:{UiError:ge},props:{autocomplete:{type:Boolean},errors:{type:[Array,String],default:"",required:!1},label:{type:String,default:"",required:!1},name:{type:String,required:!0},type:{type:String,default:"text",required:!0},value:{type:String}},emits:["update:value"],setup(e,{emit:t}){const n=Object(r["b"])({get:()=>e.value,set:e=>t("update:value",e)});return{input:n}},computed:{classes(){return{"ui-input":!0}}}};me.render=de;var he=me;const fe=e=>({FETCH:e+"_FETCH",SUCCESS:e+"_SUCCESS",FAILURE:e+"_FAILURE",PENDING:e+"_PENDING"}),ve=fe("AUTH");var ye={name:"LoginForm",components:{UiInput:he},setup(){const e=Object(h["c"])(),t=Object(u["c"])(),n=Object(r["u"])({username:"",password:"",loading:!1,isDirty:Object(r["b"])(()=>!(!n.username||!n.password)),errors:{},hasErrors:Object(r["b"])(()=>Object.keys(n.errors).some(e=>!!n.errors[e])),message:""}),a=Object(ne["a"])({username:Object(ne["b"])().required(),password:Object(ne["b"])().required()});function o(e){a.validateAt(e,{username:n.username,password:n.password}).then(()=>{n.errors[e]=""}).catch(t=>{n.errors[e]=t.errors})}function c(){a.validate({username:n.username,password:n.password},{abortEarly:!1}).then(()=>(n.loading=!0,be({username:n.username,password:n.password}).then(e=>{const{error:t,data:r}=e||{};if(t)throw n.errors={},n.loading=!1,n.password="",n.username="",n.message=r.message,new Error("LoginFailed")}).then(()=>e.dispatch("auth/"+ve.FETCH)).then(()=>t.push({name:"dashboard"})).catch(()=>{}))).catch(e=>{e.inner.forEach(e=>{n.errors[e.path]=e.errors})})}const l=(e,t,n,r,a=window)=>{const o=a.top.outerHeight/2+a.top.screenY-r/2,c=a.top.outerWidth/2+a.top.screenX-n/2,u=`rel=opener, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${n}, height=${r}, top=${o}, left=${c}`;a.open(e,t,u)};return{loginUser:c,popup:l,validate:o,...Object(r["C"])(n)}}};n("8b22");ye.render=te,ye.__scopeId="data-v-37a0b419";var we=ye,_e={name:"Login",components:{LoginForm:we}};_e.render=M;var Ce=_e;const Ee=Object(r["g"])("h1",null,"Not Found",-1);function Ie(e,t,n,a,o,c){return Object(r["q"])(),Object(r["d"])("div",null,[Ee])}var Se={name:"NotFound"};Se.render=Ie;var qe=Se;const Ue=[{path:"/",name:"home",component:z,meta:{navItem:!0},props:!1},{path:"/login",name:"login",component:Ce,meta:{navItem:!0,guest:!0}},{path:"/dashboard",name:"dashboard",component:R,meta:{navItem:!0,auth:!0},props:!0},{path:"/success",name:"success",component:G,meta:{navItem:!1},props:!0},{path:"/:catchAll(.*)",name:"notfound",component:qe,meta:{navItem:!1}}];var ke=Ue;const xe=()=>({counter:0}),Be={counter:e=>e.counter},De={setCounter({commit:e},t){e("setCounter",t)},resetCounter({commit:e}){e("setCounter",{counter:0})},updateCounter({commit:e}){e("incrementCounter")}},Ae={setCounter(e,t){e.counter=t.counter},incrementCounter(e){e.counter++}};var Fe={namespaced:!0,state:xe,getters:Be,actions:De,mutations:Ae};const Le=async(e,{cb:t,types:n})=>{try{e.commit(n.PENDING);const{data:r,error:a}=await t();e.commit(a?n.FAILURE:n.SUCCESS,r)}catch(r){e.commit(n.FAILURE,r)}},Te={accountType:null,credits:null,googlePicture:null,authenticated:!1,username:null},ze={data:Te,error:null,failed:!1,loaded:!1,loading:!1},Ne=()=>ze,Je={auth:e=>e.data,error:e=>e.error,failed:e=>e.failed,loaded:e=>e.loaded,loading:e=>e.loading,authenticated:e=>e.data.authenticated,credits:e=>e.data.credits},Ge={[ve.FETCH]:e=>Le(e,{cb:()=>ie(),types:ve})},Pe={[ve.PENDING](e){e.loading=!0},[ve.SUCCESS](e,t){const{googleId:n,id:r=null}=t||{},a=r?{...t,accountType:n?"google":"local",authenticated:!0}:Te;e.data=a,e.error=null,e.failed=!1,e.loaded=!0,e.loading=!1},[ve.FAILURE](e,t){e.data=Te,e.error=t,e.failed=!0,e.loaded=!1,e.loading=!1}};var He={namespaced:!0,state:Ne,getters:Je,actions:Ge,mutations:Pe},$e=n("532d"),Re=n.n($e);const Me={async init({dispatch:e}){await e("auth/AUTH_FETCH")}};var Ve=Me;const Ke=!1,We=Object(h["b"])({plugins:[...Ke?[Object(h["a"])()]:[]],actions:Ve,modules:{test:Fe,auth:He,countries:Re.a},strict:Ke});var Qe=We;const Xe=Qe.dispatch("init"),Ye=Object(r["b"])(()=>Qe.getters["auth/authenticated"]),Ze=Object(u["a"])({history:Object(u["b"])(),routes:ke});Ze.beforeEach((e,t,n)=>{Xe.then(n).catch(e=>console.log("Unable to initialize store",e))}),Ze.beforeEach((e,t,n)=>{e.matched.some(e=>e.meta.guest)?Ye.value?n({name:"dashboard"}):n():e.matched.some(e=>e.meta.auth)?Ye.value?n():n({name:"login"}):n()});var et=Ze;function tt(e,t,n,a,o,c){return Object(r["x"])(e.$slots,"default")}var nt={name:"Layout",inheritAttrs:!1,props:{name:{type:String,default:"div",required:!0}},emits:["update:layout"],created(){this.$emit("update:layout",this.name)}};nt.render=tt;var rt=nt;const at=Object(r["L"])("data-v-092b3d2c");Object(r["t"])("data-v-092b3d2c");const ot={class:"app"},ct={class:"app__header"},ut={class:"app__main"},lt=Object(r["g"])("footer",{class:"app__footer"},"© Quizdini 2013-21",-1);Object(r["r"])();const st=at((e,t,n,a,o,c)=>{const u=Object(r["y"])("app-nav");return Object(r["q"])(),Object(r["d"])("div",ot,[Object(r["g"])("header",ct,[Object(r["g"])(u,{class:"app__nav"})]),Object(r["g"])("main",ut,[Object(r["x"])(e.$slots,"default")]),lt])}),it={class:"nav"},bt={key:0,class:"nav__item"},dt={key:1,href:"/logout",class:"nav__item",target:"_self"},Ot={key:2,class:"nav__item badge"},jt={key:3,class:"nav__item nav__item--lc"};function pt(e,t,n,a,o,c){const u=Object(r["y"])("NavItems");return Object(r["q"])(),Object(r["d"])("nav",it,[Object(r["g"])(u,{items:a.routes,authenticated:a.auth.authenticated},null,8,["items","authenticated"]),a.auth.authenticated&&a.auth.credits>=0?(Object(r["q"])(),Object(r["d"])("span",bt,"Credits: "+Object(r["B"])(a.auth.credits),1)):Object(r["e"])("",!0),a.auth.authenticated?(Object(r["q"])(),Object(r["d"])("a",dt,"logout")):Object(r["e"])("",!0),a.auth.authenticated&&"google"===a.auth.accountType?(Object(r["q"])(),Object(r["d"])("span",Ot,["google"===a.auth.accountType?(Object(r["q"])(),Object(r["d"])("img",{key:0,src:a.auth.googlePicture,class:"badge--google"},null,8,["src"])):Object(r["e"])("",!0)])):Object(r["e"])("",!0),a.auth.authenticated&&"local"===a.auth.accountType?(Object(r["q"])(),Object(r["d"])("span",jt,Object(r["B"])(a.auth.username),1)):Object(r["e"])("",!0)])}function gt(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(r["l"])(e)}const mt=({items:e,authenticated:t})=>e.filter(e=>{const{meta:{navItem:n=!1,auth:r=!1,guest:a=!1}={}}=e;return!!n&&(t?r||!a:!r)}).map(e=>{const{name:t}=e;return Object(r["g"])(Object(r["y"])("router-link"),{class:"nav__item",to:{name:t},key:t},gt(t)?t:{default:()=>[t]})});var ht={name:"AppNav",components:{NavItems:mt},setup(){const e=Object(h["c"])(),t=Object(r["b"])(()=>e.getters["auth/auth"]);return{auth:t,routes:ke}}};n("cab4");ht.render=pt;var ft=ht,vt={name:"LayoutDefault",components:{AppNav:ft}};n("361e");vt.render=st,vt.__scopeId="data-v-092b3d2c";var yt=vt;const wt=[rt,yt];var _t={install:(e,t)=>{wt.forEach(t=>{e.component(t.name,t)})}};Object(r["c"])(c).use(Qe).use(et).use(_t).mount("#quizdini")},6423:function(e,t,n){},"8b22":function(e,t,n){"use strict";n("6423")},bc43:function(e,t,n){"use strict";n("f50f")},cab4:function(e,t,n){"use strict";n("e602")},e602:function(e,t,n){},f50f:function(e,t,n){}});
//# sourceMappingURL=app.799b302b.js.map